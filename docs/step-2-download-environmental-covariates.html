<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Step 2: download environmental covariates |  Technical Manual for Global Soil Nutrient and Nutrient Budgets map (GSNmap)</title>
  <meta name="description" content="GSNmap - Technical Manual" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Step 2: download environmental covariates |  Technical Manual for Global Soil Nutrient and Nutrient Budgets map (GSNmap)" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="GSNmap - Technical Manual" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Step 2: download environmental covariates |  Technical Manual for Global Soil Nutrient and Nutrient Budgets map (GSNmap)" />
  
  <meta name="twitter:description" content="GSNmap - Technical Manual" />
  

<meta name="author" content="Angelini, M.E, Mainka, M., Luotto, I., Omuto Thine, C., Yigini, Y., Tong, Y." />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="step-1-soil-data-preparation.html"/>
<link rel="next" href="step-3-mapping-continuous-soil-properties.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.2/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.2/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Licence</a></li>
<li class="chapter" data-level="" data-path="abbreviations-and-acronyms.html"><a href="abbreviations-and-acronyms.html"><i class="fa fa-check"></i>Abbreviations and acronyms</a></li>
<li class="chapter" data-level="" data-path="publisher.html"><a href="publisher.html"><i class="fa fa-check"></i>Publisher</a></li>
<li class="chapter" data-level="" data-path="contributors-and-reviewers.html"><a href="contributors-and-reviewers.html"><i class="fa fa-check"></i>Contributors and reviewers</a></li>
<li class="chapter" data-level="1" data-path="presentation.html"><a href="presentation.html"><i class="fa fa-check"></i><b>1</b> Presentation</a>
<ul>
<li class="chapter" data-level="1.1" data-path="presentation.html"><a href="presentation.html#background-and-objectives"><i class="fa fa-check"></i><b>1.1</b> Background and objectives</a></li>
<li class="chapter" data-level="1.2" data-path="presentation.html"><a href="presentation.html#global-soil-partnership"><i class="fa fa-check"></i><b>1.2</b> Global Soil Partnership</a></li>
<li class="chapter" data-level="1.3" data-path="presentation.html"><a href="presentation.html#country-driven-approach-and-tasks"><i class="fa fa-check"></i><b>1.3</b> Country-driven approach and tasks</a></li>
<li class="chapter" data-level="1.4" data-path="presentation.html"><a href="presentation.html#how-to-use-this-book"><i class="fa fa-check"></i><b>1.4</b> How to use this book</a></li>
<li class="chapter" data-level="1.5" data-path="presentation.html"><a href="presentation.html#training-material"><i class="fa fa-check"></i><b>1.5</b> Training material</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="soil-nutrients.html"><a href="soil-nutrients.html"><i class="fa fa-check"></i><b>2</b> Soil Nutrients</a>
<ul>
<li class="chapter" data-level="2.1" data-path="soil-nutrients.html"><a href="soil-nutrients.html#definition-of-soil-nutrients"><i class="fa fa-check"></i><b>2.1</b> Definition of soil nutrients</a></li>
<li class="chapter" data-level="2.2" data-path="soil-nutrients.html"><a href="soil-nutrients.html#soil-properties-governing-nutrient-availability"><i class="fa fa-check"></i><b>2.2</b> Soil properties governing nutrient availability</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html"><i class="fa fa-check"></i><b>3</b> Setting-up the software environment</a>
<ul>
<li class="chapter" data-level="3.1" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#use-of-r-rstudio-and-r-packages"><i class="fa fa-check"></i><b>3.1</b> Use of R, RStudio and R Packages</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#obtaining-and-installing-r"><i class="fa fa-check"></i><b>3.1.1</b> Obtaining and installing R</a></li>
<li class="chapter" data-level="3.1.2" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#obtaining-and-installing-rstudio"><i class="fa fa-check"></i><b>3.1.2</b> Obtaining and installing RStudio</a></li>
<li class="chapter" data-level="3.1.3" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#getting-started-with-r"><i class="fa fa-check"></i><b>3.1.3</b> Getting started with R</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#r-packages"><i class="fa fa-check"></i><b>3.2</b> R packages</a></li>
<li class="chapter" data-level="3.3" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#gee---google-earth-engine"><i class="fa fa-check"></i><b>3.3</b> GEE - google earth engine</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="digital-soil-mapping.html"><a href="digital-soil-mapping.html"><i class="fa fa-check"></i><b>4</b> Digital Soil Mapping</a>
<ul>
<li class="chapter" data-level="4.1" data-path="digital-soil-mapping.html"><a href="digital-soil-mapping.html#principles"><i class="fa fa-check"></i><b>4.1</b> Principles</a></li>
<li class="chapter" data-level="4.2" data-path="digital-soil-mapping.html"><a href="digital-soil-mapping.html#environmental-covariates"><i class="fa fa-check"></i><b>4.2</b> Environmental covariates</a></li>
<li class="chapter" data-level="4.3" data-path="digital-soil-mapping.html"><a href="digital-soil-mapping.html#machine-learning-techniques"><i class="fa fa-check"></i><b>4.3</b> Machine learning techniques</a></li>
<li class="chapter" data-level="4.4" data-path="digital-soil-mapping.html"><a href="digital-soil-mapping.html#mapping-of-soil-nutrients-and-associated-soil-attributes"><i class="fa fa-check"></i><b>4.4</b> Mapping of soil nutrients and associated soil attributes</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="arranging-soil-data-in-r.html"><a href="arranging-soil-data-in-r.html"><i class="fa fa-check"></i><b>5</b> Arranging soil data in <strong>R</strong></a>
<ul>
<li class="chapter" data-level="5.1" data-path="arranging-soil-data-in-r.html"><a href="arranging-soil-data-in-r.html#study-area-and-training-material"><i class="fa fa-check"></i><b>5.1</b> Study area and training material</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="arranging-soil-data-in-r.html"><a href="arranging-soil-data-in-r.html#georeferenced-topsoil-data"><i class="fa fa-check"></i><b>5.1.1</b> Georeferenced topsoil data</a></li>
<li class="chapter" data-level="5.1.2" data-path="arranging-soil-data-in-r.html"><a href="arranging-soil-data-in-r.html#soil-profile-data"><i class="fa fa-check"></i><b>5.1.2</b> Soil profile data</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="arranging-soil-data-in-r.html"><a href="arranging-soil-data-in-r.html#preproc"><i class="fa fa-check"></i><b>5.2</b> Format requirements of soil data</a></li>
<li class="chapter" data-level="5.3" data-path="arranging-soil-data-in-r.html"><a href="arranging-soil-data-in-r.html#pre-processing-steps"><i class="fa fa-check"></i><b>5.3</b> Pre-processing steps</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="arranging-soil-data-in-r.html"><a href="arranging-soil-data-in-r.html#set-the-scene-set-working-directory-packages-load-data"><i class="fa fa-check"></i><b>5.3.1</b> Set the scene (set working directory, packages, load data)</a></li>
<li class="chapter" data-level="5.3.2" data-path="arranging-soil-data-in-r.html"><a href="arranging-soil-data-in-r.html#basic-data-handling-operations"><i class="fa fa-check"></i><b>5.3.2</b> Basic data handling operations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html"><i class="fa fa-check"></i><b>6</b> Step 1: soil data preparation</a>
<ul>
<li class="chapter" data-level="6.1" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#load-national-data"><i class="fa fa-check"></i><b>6.1</b> Load national data</a></li>
<li class="chapter" data-level="6.2" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#data-quality-check"><i class="fa fa-check"></i><b>6.2</b> Data quality check</a></li>
<li class="chapter" data-level="6.3" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#calculation-of-pedo-transfer-functions"><i class="fa fa-check"></i><b>6.3</b> Calculation of pedo-transfer functions</a></li>
<li class="chapter" data-level="6.4" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#check-for-outliers"><i class="fa fa-check"></i><b>6.4</b> Check for outliers</a></li>
<li class="chapter" data-level="6.5" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#harmonise-soil-layer-depths"><i class="fa fa-check"></i><b>6.5</b> Harmonise soil layer depths</a></li>
<li class="chapter" data-level="6.6" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#harmonise-units"><i class="fa fa-check"></i><b>6.6</b> Harmonise units</a></li>
<li class="chapter" data-level="6.7" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#save-the-results"><i class="fa fa-check"></i><b>6.7</b> Save the results</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html"><i class="fa fa-check"></i><b>7</b> Step 2: download environmental covariates</a>
<ul>
<li class="chapter" data-level="7.1" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#environmental-covariates-1"><i class="fa fa-check"></i><b>7.1</b> Environmental covariates</a></li>
<li class="chapter" data-level="7.2" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#download-covariates-with-google-earth-engine-gee"><i class="fa fa-check"></i><b>7.2</b> Download covariates with Google Earth Engine (GEE)</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#assets"><i class="fa fa-check"></i><b>7.2.1</b> Assets</a></li>
<li class="chapter" data-level="7.2.2" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#define-the-region-of-interest-roi"><i class="fa fa-check"></i><b>7.2.2</b> Define the region of Interest (ROI)</a></li>
<li class="chapter" data-level="7.2.3" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#load-and-clip-the-covariates"><i class="fa fa-check"></i><b>7.2.3</b> Load and clip the covariates</a></li>
<li class="chapter" data-level="7.2.4" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#clean-holes-in-fpar-layers"><i class="fa fa-check"></i><b>7.2.4</b> Clean holes in FPAR layers</a></li>
<li class="chapter" data-level="7.2.5" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#visualize-and-export-the-covariates"><i class="fa fa-check"></i><b>7.2.5</b> Visualize and export the covariates</a></li>
<li class="chapter" data-level="7.2.6" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#load-and-clip-the-copernicus-land-cover-map-and"><i class="fa fa-check"></i><b>7.2.6</b> Load and clip the Copernicus land cover map and</a></li>
<li class="chapter" data-level="7.2.7" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#reclassify-the-land-cover-map"><i class="fa fa-check"></i><b>7.2.7</b> Reclassify the land cover map</a></li>
<li class="chapter" data-level="7.2.8" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#visualization-and-exporting-mask"><i class="fa fa-check"></i><b>7.2.8</b> Visualization and exporting mask</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#run-and-export-in-gee"><i class="fa fa-check"></i><b>7.3</b> Run and export in GEE</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="step-3-mapping-continuous-soil-properties.html"><a href="step-3-mapping-continuous-soil-properties.html"><i class="fa fa-check"></i><b>8</b> Step 3: Mapping continuous soil properties</a>
<ul>
<li class="chapter" data-level="8.1" data-path="step-3-mapping-continuous-soil-properties.html"><a href="step-3-mapping-continuous-soil-properties.html#getting-prepared-to-map"><i class="fa fa-check"></i><b>8.1</b> Getting prepared to map</a></li>
<li class="chapter" data-level="8.2" data-path="step-3-mapping-continuous-soil-properties.html"><a href="step-3-mapping-continuous-soil-properties.html#covariate-selection-and-repeated-k-fold-cross-validation"><i class="fa fa-check"></i><b>8.2</b> Covariate selection and repeated k-fold cross-validation</a></li>
<li class="chapter" data-level="8.3" data-path="step-3-mapping-continuous-soil-properties.html"><a href="step-3-mapping-continuous-soil-properties.html#model-calibration"><i class="fa fa-check"></i><b>8.3</b> Model calibration</a></li>
<li class="chapter" data-level="8.4" data-path="step-3-mapping-continuous-soil-properties.html"><a href="step-3-mapping-continuous-soil-properties.html#uncertainty-assessment"><i class="fa fa-check"></i><b>8.4</b> Uncertainty assessment</a></li>
<li class="chapter" data-level="8.5" data-path="step-3-mapping-continuous-soil-properties.html"><a href="step-3-mapping-continuous-soil-properties.html#predicting-soil-attributes"><i class="fa fa-check"></i><b>8.5</b> Predicting soil attributes</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="reporting-results.html"><a href="reporting-results.html"><i class="fa fa-check"></i><b>9</b> Reporting results</a>
<ul>
<li class="chapter" data-level="9.1" data-path="reporting-results.html"><a href="reporting-results.html#data-submission-form"><i class="fa fa-check"></i><b>9.1</b> Data submission form</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="way-forward.html"><a href="way-forward.html"><i class="fa fa-check"></i><b>10</b> Way forward</a>
<ul>
<li class="chapter" data-level="10.1" data-path="way-forward.html"><a href="way-forward.html#frequent-asked-questions-and-troubleshooting-answers"><i class="fa fa-check"></i><b>10.1</b> Frequent asked questions and Troubleshooting answers</a></li>
<li class="chapter" data-level="10.2" data-path="way-forward.html"><a href="way-forward.html#issues-in-the-gsnmap-technical-manual"><i class="fa fa-check"></i><b>10.2</b> Issues in the GSNmap Technical Manual</a></li>
<li class="chapter" data-level="10.3" data-path="way-forward.html"><a href="way-forward.html#get-help"><i class="fa fa-check"></i><b>10.3</b> Get help</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="annex-i-compendium-of-r-scripts.html"><a href="annex-i-compendium-of-r-scripts.html"><i class="fa fa-check"></i>Annex I: Compendium of R scripts</a>
<ul>
<li class="chapter" data-level="" data-path="annex-i-compendium-of-r-scripts.html"><a href="annex-i-compendium-of-r-scripts.html#script-0-installation-of-rgee"><i class="fa fa-check"></i>Script 0: Installation of rgee</a></li>
<li class="chapter" data-level="" data-path="annex-i-compendium-of-r-scripts.html"><a href="annex-i-compendium-of-r-scripts.html#script-1-data-preparation"><i class="fa fa-check"></i>Script 1: Data preparation</a></li>
<li class="chapter" data-level="" data-path="annex-i-compendium-of-r-scripts.html"><a href="annex-i-compendium-of-r-scripts.html#script-2-download-environmental-covariates"><i class="fa fa-check"></i>Script 2: Download environmental covariates</a></li>
<li class="chapter" data-level="" data-path="annex-i-compendium-of-r-scripts.html"><a href="annex-i-compendium-of-r-scripts.html#script-3-modelling-validation-and-prediction-using-soil-data-with-coordinates"><i class="fa fa-check"></i>Script 3: Modelling, validation and prediction using soil data with coordinates</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="annex-ii-r-scripts-for-extra-functions.html"><a href="annex-ii-r-scripts-for-extra-functions.html"><i class="fa fa-check"></i>Annex II: R scripts for extra functions</a></li>
<li class="chapter" data-level="" data-path="annex-iii-mapping-without-point-coordinates.html"><a href="annex-iii-mapping-without-point-coordinates.html"><i class="fa fa-check"></i>Annex III: Mapping without point coordinates</a></li>
<li class="chapter" data-level="" data-path="annex-iv-quality-assurance-and-quality-control.html"><a href="annex-iv-quality-assurance-and-quality-control.html"><i class="fa fa-check"></i>Annex IV: Quality assurance and quality control</a>
<ul>
<li class="chapter" data-level="" data-path="annex-iv-quality-assurance-and-quality-control.html"><a href="annex-iv-quality-assurance-and-quality-control.html#step-1-completeness-of-layers"><i class="fa fa-check"></i>Step 1: Completeness of layers</a></li>
<li class="chapter" data-level="" data-path="annex-iv-quality-assurance-and-quality-control.html"><a href="annex-iv-quality-assurance-and-quality-control.html#step-2-check-the-projection-and-resolution-of-all-data-products"><i class="fa fa-check"></i>Step 2: Check the projection and resolution of all data products</a></li>
<li class="chapter" data-level="" data-path="annex-iv-quality-assurance-and-quality-control.html"><a href="annex-iv-quality-assurance-and-quality-control.html#step-3-check-the-extent"><i class="fa fa-check"></i>Step 3: Check the extent</a></li>
<li class="chapter" data-level="" data-path="annex-iv-quality-assurance-and-quality-control.html"><a href="annex-iv-quality-assurance-and-quality-control.html#step-4-check-the-units-ranges-and-outliers"><i class="fa fa-check"></i>Step 4: Check the units, ranges, and outliers</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><p><img src="images/frontcover.jpg" style="top:0px;height:100px;" align="right" />
Technical Manual for Global Soil Nutrient and Nutrient Budgets map (GSNmap)</p></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="step-2-download-environmental-covariates" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Chapter 7</span> Step 2: download environmental covariates<a href="step-2-download-environmental-covariates.html#step-2-download-environmental-covariates" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="environmental-covariates-1" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Environmental covariates<a href="step-2-download-environmental-covariates.html#environmental-covariates-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The SCORPAN equation (Eq. <a href="digital-soil-mapping.html#eq:scorpan">(4.1)</a>) refers to the soil-forming factors that determine the spatial variation of soils. However, these factors cannot be measured directly. Instead, proxies of these soil forming factors are used. One essential characteristic of the environmental covariates is that they are spatially explicit, covering the whole study area. The following Table <a href="step-2-download-environmental-covariates.html#tab:covs1">7.1</a> lists all the environmental covariates that can be implemented under the present DSM framework. Apart from the environmental covariates mentioned in Table <a href="step-2-download-environmental-covariates.html#tab:covs1">7.1</a>, other types of maps could also be included, such as Global Surface Water Mapping Layers and Water Soil Erosion from the Joint Research Centre (JRC). At national level there may be very significant covariates that could complement or replace the covariates of Table <a href="step-2-download-environmental-covariates.html#tab:covs1">7.1</a>. Thus, the selection of suitable covariate layers needs to be assessed with common sense and applying expert knowledge.</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:covs1">Table 7.1: </span>List of environmental covariates.
</caption>
<thead>
<tr>
<th style="text-align:left;">
Description
</th>
<th style="text-align:left;">
Code
</th>
<th style="text-align:left;">
Resolution m
</th>
</tr>
</thead>
<tbody>
<tr grouplength="3">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Temperature</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean air temperature (annual)
</td>
<td style="text-align:left;">
bio1
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean daily temperature of warmest month
</td>
<td style="text-align:left;">
bio5
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean daily temperature of coldest month
</td>
<td style="text-align:left;">
bio6
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr grouplength="5">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Precipitation</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean annual precipitation
</td>
<td style="text-align:left;">
bio12
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean precipitation of wettest month
</td>
<td style="text-align:left;">
bio13
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean precipitation of driest month
</td>
<td style="text-align:left;">
bio14
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean monthly precipitation of wettest quarter
</td>
<td style="text-align:left;">
bio16
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean monthly precipitation of driest quarter
</td>
<td style="text-align:left;">
bio17
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr grouplength="4">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Potential evapotranspiration (PET)</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean monthly PET
</td>
<td style="text-align:left;">
pet_penman_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Minimum monthly PET
</td>
<td style="text-align:left;">
pet_penman_min
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Range monthly PET
</td>
<td style="text-align:left;">
pet_penman_range
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Maximum monthly PET
</td>
<td style="text-align:left;">
pet_penman_max
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr grouplength="3">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Wind</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Minimum monthly wind speed
</td>
<td style="text-align:left;">
sfcWind_min
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Maximum monthly wind speed
</td>
<td style="text-align:left;">
sfcWind_max
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Range monthly wind speed
</td>
<td style="text-align:left;">
sfcWind_range
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr grouplength="2">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Growing season</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Number of days with mean daily air
</td>
<td style="text-align:left;">
ngd10
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
temperature above 10 degrees Celsius
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr grouplength="8">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Vegetation indices (NDVI) (MOD13Q1)</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean March-May from 2000-2022
</td>
<td style="text-align:left;">
ndvi_030405_mean
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean June-August from 2000-2022
</td>
<td style="text-align:left;">
ndvi_060708_mean
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean September-November from 2000-2022
</td>
<td style="text-align:left;">
ndvi_091011_mean
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean December-February from 2000-2022
</td>
<td style="text-align:left;">
ndvi_120102_mean
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation March-May (2000-2022)
</td>
<td style="text-align:left;">
ndvi_030405_sd
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation June-August (2000-2022)
</td>
<td style="text-align:left;">
ndvi_060708_sd
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation Sept.-Nov. (2000-2022)
</td>
<td style="text-align:left;">
ndvi_091011_sd
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation Dec.-Feb. (2000-2022)
</td>
<td style="text-align:left;">
ndvi_120102_sd
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr grouplength="8">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Fraction of photosynthetically active radiation (FPAR) (MOD15A2H)</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean March-May from 2000-2022
</td>
<td style="text-align:left;">
fpar_030405_mean
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean June-August from 2000-2022
</td>
<td style="text-align:left;">
fpar_060708_mean
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean September-November from 2000-2022
</td>
<td style="text-align:left;">
fpar_091011_mean
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean December-February from 2000-2022
</td>
<td style="text-align:left;">
fpar_120102_mean
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation March-May (2000-2022)
</td>
<td style="text-align:left;">
fpar_030405_sd
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation June-August (2000-2022)
</td>
<td style="text-align:left;">
fpar_060708_sd
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation Sept.-Nov. (2000-2022)
</td>
<td style="text-align:left;">
fpar_091011_sd
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation Dec.-Feb. (2000-2022)
</td>
<td style="text-align:left;">
fpar_120102_sd
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr grouplength="8">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Land surface temperature day (LSTD) (MOD11A2)</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean March-May from 2000-2022
</td>
<td style="text-align:left;">
lstd_030405_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean June-August from 2000-2022
</td>
<td style="text-align:left;">
lstd_060708_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean September-November from 2000-2022
</td>
<td style="text-align:left;">
lstd_091011_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean December-February from 2000-2022
</td>
<td style="text-align:left;">
lstd_120102_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation March-May (2000-2022)
</td>
<td style="text-align:left;">
lstd_030405_sd
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation June-August (2000-2022)
</td>
<td style="text-align:left;">
lstd_060708_sd
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation Sept.-Nov. (2000-2022)
</td>
<td style="text-align:left;">
lstd_091011_sd
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation Dec.-Feb. (2000-2022)
</td>
<td style="text-align:left;">
lstd_120102_sd
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr grouplength="8">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Normalised difference between LST day and LST night (MOD11A2)</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean March-May from 2000-2022
</td>
<td style="text-align:left;">
ndlstd_030405_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean June-August from 2000-2022
</td>
<td style="text-align:left;">
ndlstd_060708_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean September-November from 2000-2022
</td>
<td style="text-align:left;">
ndlstd_091011_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean December-February from 2000-2022
</td>
<td style="text-align:left;">
ndlstd_120102_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation March-May (2000-2022)
</td>
<td style="text-align:left;">
ndlstd_030405_sd
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation June-August (2000-2022)
</td>
<td style="text-align:left;">
ndlstd_060708_sd
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation Sept.-Nov. (2000-2022)
</td>
<td style="text-align:left;">
ndlstd_091011_sd
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation Dec.-Feb. (2000-2022)
</td>
<td style="text-align:left;">
ndlstd_120102_sd
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr grouplength="1">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Short-wave Infrared (SWIR) black-sky albedo for shortwave broadband (MCD43A3)</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean June-August from 2000-2022
</td>
<td style="text-align:left;">
swir_060708_mean
</td>
<td style="text-align:left;">
5–
</td>
</tr>
<tr grouplength="1">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>MODIS snow cover (MOD10A1)</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean snow cover
</td>
<td style="text-align:left;">
mean_snow_cover
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr grouplength="9">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Land cover dynamic world 10m near real-time land use/land cover (LULC) dataset</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean estimated probability of complete coverage by trees
</td>
<td style="text-align:left;">
trees
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean estimated probability of complete coverage
</td>
<td style="text-align:left;">
shrub_and_scrub
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
by shrub and scrub
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean estimated probability of complete coverage
</td>
<td style="text-align:left;">
flooded_vegetation
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
by flooded vegetation
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean estimated probability of complete coverage
</td>
<td style="text-align:left;">
grass
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
by grasses
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean estimated probability of complete coverage
</td>
<td style="text-align:left;">
crop
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
by bare
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr grouplength="13">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Terrain</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Profile curvature
</td>
<td style="text-align:left;">
curvature
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Downslope curvature
</td>
<td style="text-align:left;">
downslopecurvature
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Upslope curvature
</td>
<td style="text-align:left;">
upslopecurvature
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Deviation from mean value
</td>
<td style="text-align:left;">
dvm
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
deviation from mean value
</td>
<td style="text-align:left;">
dvm2
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Elevation
</td>
<td style="text-align:left;">
elevation
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Melton ruggedness number
</td>
<td style="text-align:left;">
mrn
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Negative openness
</td>
<td style="text-align:left;">
neg_openness
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Positive openness
</td>
<td style="text-align:left;">
pos_openness
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Slope
</td>
<td style="text-align:left;">
slope
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Topographic position index
</td>
<td style="text-align:left;">
tpi
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Terrain wetness index
</td>
<td style="text-align:left;">
twi
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Multiresolution of valley bottom flatness
</td>
<td style="text-align:left;">
vbf
</td>
<td style="text-align:left;">
250
</td>
</tr>
</tbody>
</table>
</div>
<div id="download-covariates-with-google-earth-engine-gee" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Download covariates with Google Earth Engine (GEE)<a href="step-2-download-environmental-covariates.html#download-covariates-with-google-earth-engine-gee" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following are the steps to access and download the environmental covariates and cropland mask. The GSP has streamlined the process of downloading environmental covariates by reducing the need to clip and download layers from GEE. This chapter aims to guide you on how to download environmental covariates using a GEE script.</p>
<p>You can find the JavaScript code in the material provided in this technical manual under <a href="https://github.com/FAO-GSP/GSNmap-TM/tree/main/Digital-Soil-Mapping/03-Scripts">03-scripts/3.0.Download_Covariates_&amp;_Mask.txt</a>. To use the code, simply copy and paste the text in the GEE console as shown in the figure below.</p>
<div class="figure"><span style="display:block;" id="fig:screenshot"></span>
<img src="images/javaScript_GEE.png" alt="R Studio interface." width="924" />
<p class="caption">
Figure 7.1: R Studio interface.
</p>
</div>
<p>If not done already, it is necessary to specify the working directory and a file path directory to the output folder where the clipped covariate layers are going to be saved. In case users want to use their own shapefile of the AOI, it is necessary to specify the file path to load it into our <strong>R</strong> session later. Alternatively, the shapefile of the AOI can be clipped from the official UN map shapefile that is available in the “Digital-Soil-Mapping-GSP-FAO” based on the 3-digit ISO code (ISO3CD column in the attribute table). The process to do this will be explained in a few steps. Finally, it is also necessary to specify the resolution to 250 x 250 m for the covariate layers and set the CRS to WGS84 (equals EPSG code 4326). Note that the target resolution of the GSNmap is at 250 m, which can be considered a moderate resolution for a global layer. However, those countries that require a higher resolution are free to develop higher resolution maps and aggregate the resulting maps to the target resolution of GSNmap for submission.</p>
<p>The following text explains the structure of the script that will be executed in GEE, and which parts of the script need to be modified to extract the covariates from the area of interest (AOI).</p>
<div id="assets" class="section level3 hasAnchor" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Assets<a href="step-2-download-environmental-covariates.html#assets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In GEE, an “asset” refers to any data or code that has been uploaded and stored in GEE’s cloud-based servers. Assets can include remote sensing data, vector data, and even scripts or functions.</p>
<p>The following code reads the assets that have been created by the GSP in GEE. This means that the code accesses the data and scripts that GSP has uploaded to GEE, and uses them to perform specific tasks or analyses. By leveraging GEE’s cloud-based infrastructure and GSP’s assets, users can easily access and analyze large amounts of data without the need for local storage or processing power.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb87-1"><a href="step-2-download-environmental-covariates.html#cb87-1" aria-hidden="true" tabindex="-1"></a>#Empty environment and cache</span>
<span id="cb87-2"><a href="step-2-download-environmental-covariates.html#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> assets <span class="op">=</span> [<span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/CHELSA/bio1&quot;</span><span class="op">,</span></span>
<span id="cb87-3"><a href="step-2-download-environmental-covariates.html#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/CHELSA/bio12&quot;</span><span class="op">,</span></span>
<span id="cb87-4"><a href="step-2-download-environmental-covariates.html#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/CHELSA/bio13&quot;</span><span class="op">,</span></span>
<span id="cb87-5"><a href="step-2-download-environmental-covariates.html#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/CHELSA/bio14&quot;</span><span class="op">,</span></span>
<span id="cb87-6"><a href="step-2-download-environmental-covariates.html#cb87-6" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/CHELSA/bio16&quot;</span><span class="op">,</span></span>
<span id="cb87-7"><a href="step-2-download-environmental-covariates.html#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/CHELSA/bio17&quot;</span><span class="op">,</span></span>
<span id="cb87-8"><a href="step-2-download-environmental-covariates.html#cb87-8" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/CHELSA/bio5&quot;</span><span class="op">,</span></span>
<span id="cb87-9"><a href="step-2-download-environmental-covariates.html#cb87-9" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/CHELSA/bio6&quot;</span><span class="op">,</span></span>
<span id="cb87-10"><a href="step-2-download-environmental-covariates.html#cb87-10" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/CHELSA/ngd10&quot;</span><span class="op">,</span></span>
<span id="cb87-11"><a href="step-2-download-environmental-covariates.html#cb87-11" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/CHELSA/pet_penman_max&quot;</span><span class="op">,</span></span>
<span id="cb87-12"><a href="step-2-download-environmental-covariates.html#cb87-12" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/CHELSA/pet_penman_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-13"><a href="step-2-download-environmental-covariates.html#cb87-13" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/CHELSA/pet_penman_min&quot;</span><span class="op">,</span></span>
<span id="cb87-14"><a href="step-2-download-environmental-covariates.html#cb87-14" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/CHELSA/pet_penman_range&quot;</span><span class="op">,</span></span>
<span id="cb87-15"><a href="step-2-download-environmental-covariates.html#cb87-15" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/CHELSA/sfcWind_max&quot;</span><span class="op">,</span></span>
<span id="cb87-16"><a href="step-2-download-environmental-covariates.html#cb87-16" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/CHELSA/sfcWind_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-17"><a href="step-2-download-environmental-covariates.html#cb87-17" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/CHELSA/sfcWind_range&quot;</span><span class="op">,</span></span>
<span id="cb87-18"><a href="step-2-download-environmental-covariates.html#cb87-18" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/fpar_030405_500m_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-19"><a href="step-2-download-environmental-covariates.html#cb87-19" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/fpar_030405_500m_sd&quot;</span><span class="op">,</span></span>
<span id="cb87-20"><a href="step-2-download-environmental-covariates.html#cb87-20" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/fpar_060708_500m_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-21"><a href="step-2-download-environmental-covariates.html#cb87-21" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/fpar_060708_500m_sd&quot;</span><span class="op">,</span></span>
<span id="cb87-22"><a href="step-2-download-environmental-covariates.html#cb87-22" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/fpar_091011_500m_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-23"><a href="step-2-download-environmental-covariates.html#cb87-23" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/fpar_091011_500m_sd&quot;</span><span class="op">,</span></span>
<span id="cb87-24"><a href="step-2-download-environmental-covariates.html#cb87-24" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/fpar_120102_500m_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-25"><a href="step-2-download-environmental-covariates.html#cb87-25" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/fpar_120102_500m_sd&quot;</span><span class="op">,</span></span>
<span id="cb87-26"><a href="step-2-download-environmental-covariates.html#cb87-26" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/lstd_030405_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-27"><a href="step-2-download-environmental-covariates.html#cb87-27" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/lstd_030405_sd&quot;</span><span class="op">,</span></span>
<span id="cb87-28"><a href="step-2-download-environmental-covariates.html#cb87-28" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/lstd_060708_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-29"><a href="step-2-download-environmental-covariates.html#cb87-29" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/lstd_060708_sd&quot;</span><span class="op">,</span></span>
<span id="cb87-30"><a href="step-2-download-environmental-covariates.html#cb87-30" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/lstd_091011_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-31"><a href="step-2-download-environmental-covariates.html#cb87-31" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/lstd_091011_sd&quot;</span><span class="op">,</span></span>
<span id="cb87-32"><a href="step-2-download-environmental-covariates.html#cb87-32" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/lstd_120102_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-33"><a href="step-2-download-environmental-covariates.html#cb87-33" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/lstd_120102_sd&quot;</span><span class="op">,</span></span>
<span id="cb87-34"><a href="step-2-download-environmental-covariates.html#cb87-34" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/ndlst_030405_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-35"><a href="step-2-download-environmental-covariates.html#cb87-35" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/ndlst_030405_sd&quot;</span><span class="op">,</span></span>
<span id="cb87-36"><a href="step-2-download-environmental-covariates.html#cb87-36" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/ndlst_060708_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-37"><a href="step-2-download-environmental-covariates.html#cb87-37" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/ndlst_060708_sd&quot;</span><span class="op">,</span></span>
<span id="cb87-38"><a href="step-2-download-environmental-covariates.html#cb87-38" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/ndlst_091011_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-39"><a href="step-2-download-environmental-covariates.html#cb87-39" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/ndlst_091011_sd&quot;</span><span class="op">,</span></span>
<span id="cb87-40"><a href="step-2-download-environmental-covariates.html#cb87-40" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/ndlst_120102_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-41"><a href="step-2-download-environmental-covariates.html#cb87-41" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/ndlst_120102_sd&quot;</span><span class="op">,</span></span>
<span id="cb87-42"><a href="step-2-download-environmental-covariates.html#cb87-42" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/ndvi_030405_250m_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-43"><a href="step-2-download-environmental-covariates.html#cb87-43" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/ndvi_030405_250m_sd&quot;</span><span class="op">,</span></span>
<span id="cb87-44"><a href="step-2-download-environmental-covariates.html#cb87-44" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/ndvi_060708_250m_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-45"><a href="step-2-download-environmental-covariates.html#cb87-45" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/ndvi_060708_250m_sd&quot;</span><span class="op">,</span></span>
<span id="cb87-46"><a href="step-2-download-environmental-covariates.html#cb87-46" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/ndvi_091011_250m_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-47"><a href="step-2-download-environmental-covariates.html#cb87-47" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/ndvi_091011_250m_sd&quot;</span><span class="op">,</span></span>
<span id="cb87-48"><a href="step-2-download-environmental-covariates.html#cb87-48" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/ndvi_120102_250m_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-49"><a href="step-2-download-environmental-covariates.html#cb87-49" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/ndvi_120102_250m_sd&quot;</span><span class="op">,</span></span>
<span id="cb87-50"><a href="step-2-download-environmental-covariates.html#cb87-50" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/snow_cover&quot;</span><span class="op">,</span></span>
<span id="cb87-51"><a href="step-2-download-environmental-covariates.html#cb87-51" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS/swir_060708_500m_mean&quot;</span><span class="op">,</span></span>
<span id="cb87-52"><a href="step-2-download-environmental-covariates.html#cb87-52" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/LANDCOVER/crops&quot;</span><span class="op">,</span></span>
<span id="cb87-53"><a href="step-2-download-environmental-covariates.html#cb87-53" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/LANDCOVER/flooded_vegetation&quot;</span><span class="op">,</span></span>
<span id="cb87-54"><a href="step-2-download-environmental-covariates.html#cb87-54" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/LANDCOVER/grass&quot;</span><span class="op">,</span></span>
<span id="cb87-55"><a href="step-2-download-environmental-covariates.html#cb87-55" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/LANDCOVER/shrub_and_scrub&quot;</span><span class="op">,</span></span>
<span id="cb87-56"><a href="step-2-download-environmental-covariates.html#cb87-56" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/LANDCOVER/trees&quot;</span><span class="op">,</span></span>
<span id="cb87-57"><a href="step-2-download-environmental-covariates.html#cb87-57" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/OPENLANDMAP/dtm_curvature_250m&quot;</span><span class="op">,</span></span>
<span id="cb87-58"><a href="step-2-download-environmental-covariates.html#cb87-58" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/OPENLANDMAP/dtm_downslopecurvature_250m&quot;</span><span class="op">,</span></span>
<span id="cb87-59"><a href="step-2-download-environmental-covariates.html#cb87-59" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/OPENLANDMAP/dtm_dvm2_250m&quot;</span><span class="op">,</span></span>
<span id="cb87-60"><a href="step-2-download-environmental-covariates.html#cb87-60" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/OPENLANDMAP/dtm_dvm_250m&quot;</span><span class="op">,</span></span>
<span id="cb87-61"><a href="step-2-download-environmental-covariates.html#cb87-61" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/OPENLANDMAP/dtm_elevation_250m&quot;</span><span class="op">,</span></span>
<span id="cb87-62"><a href="step-2-download-environmental-covariates.html#cb87-62" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/OPENLANDMAP/dtm_mrn_250m&quot;</span><span class="op">,</span></span>
<span id="cb87-63"><a href="step-2-download-environmental-covariates.html#cb87-63" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/OPENLANDMAP/dtm_neg_openness_250m&quot;</span><span class="op">,</span></span>
<span id="cb87-64"><a href="step-2-download-environmental-covariates.html#cb87-64" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/OPENLANDMAP/dtm_pos_openness_250m&quot;</span><span class="op">,</span></span>
<span id="cb87-65"><a href="step-2-download-environmental-covariates.html#cb87-65" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/OPENLANDMAP/dtm_slope_250m&quot;</span><span class="op">,</span></span>
<span id="cb87-66"><a href="step-2-download-environmental-covariates.html#cb87-66" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/OPENLANDMAP/dtm_tpi_250m&quot;</span><span class="op">,</span></span>
<span id="cb87-67"><a href="step-2-download-environmental-covariates.html#cb87-67" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/OPENLANDMAP/dtm_twi_500m&quot;</span><span class="op">,</span></span>
<span id="cb87-68"><a href="step-2-download-environmental-covariates.html#cb87-68" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/OPENLANDMAP/dtm_upslopecurvature_250m&quot;</span><span class="op">,</span></span>
<span id="cb87-69"><a href="step-2-download-environmental-covariates.html#cb87-69" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/OPENLANDMAP/dtm_vbf_250m&quot;</span>]<span class="op">;</span></span></code></pre></div>
</div>
<div id="define-the-region-of-interest-roi" class="section level3 hasAnchor" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Define the region of Interest (ROI)<a href="step-2-download-environmental-covariates.html#define-the-region-of-interest-roi" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This script in GEE loads borders of a specific country or a user-defined shapefile into the workspace. It does this by creating a region of interest (ROI) based on the country borders. The script first specifies a list of countries to be included in the ROI and then loads the corresponding geometries from the ‘USDOS/LSIB_SIMPLE/2017’ feature collection in the case of the LSIB 2017 dataset. In the case of a user-defined shapefile, the script uploads the borders of the ROI as an asset and replaces ‘your_shapefile’ with the path to the uploaded shapefile. Finally, the region variable is assigned the geometry of the ROI, which can be used to clip and process data within the specified boundary. You must change either the name of the country or the shape file (as an asset) to download the covariates for your specific ROI.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb88-1"><a href="step-2-download-environmental-covariates.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Load borders </span></span>
<span id="cb88-2"><a href="step-2-download-environmental-covariates.html#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="step-2-download-environmental-covariates.html#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="co">/// Using LSIB 2017 (replace the countries that you want to download)</span></span>
<span id="cb88-4"><a href="step-2-download-environmental-covariates.html#cb88-4" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> country_list <span class="op">=</span> [<span class="st">&#39;Italy&#39;</span>]<span class="op">;</span></span>
<span id="cb88-5"><a href="step-2-download-environmental-covariates.html#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> aoi <span class="op">=</span> ee<span class="op">.</span><span class="fu">FeatureCollection</span>(<span class="st">&#39;USDOS/LSIB_SIMPLE/2017&#39;</span>)</span>
<span id="cb88-6"><a href="step-2-download-environmental-covariates.html#cb88-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">filter</span>(ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">inList</span>(<span class="st">&#39;country_na&#39;</span><span class="op">,</span> country_list))<span class="op">;</span></span>
<span id="cb88-7"><a href="step-2-download-environmental-covariates.html#cb88-7" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> region <span class="op">=</span> aoi<span class="op">.</span><span class="fu">geometry</span>()<span class="op">;</span></span>
<span id="cb88-8"><a href="step-2-download-environmental-covariates.html#cb88-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-9"><a href="step-2-download-environmental-covariates.html#cb88-9" aria-hidden="true" tabindex="-1"></a><span class="co">/// Using a shapefile</span></span>
<span id="cb88-10"><a href="step-2-download-environmental-covariates.html#cb88-10" aria-hidden="true" tabindex="-1"></a><span class="co">/// 1. Upload the borders of your countries as an asset</span></span>
<span id="cb88-11"><a href="step-2-download-environmental-covariates.html#cb88-11" aria-hidden="true" tabindex="-1"></a><span class="co">/// 2. Replace &#39;your_shapefile&#39; with the path to your shapefile</span></span>
<span id="cb88-12"><a href="step-2-download-environmental-covariates.html#cb88-12" aria-hidden="true" tabindex="-1"></a><span class="co">// var shapefile = ee.FeatureCollection(&#39;users/your_username/your_shapefile&#39;);</span></span>
<span id="cb88-13"><a href="step-2-download-environmental-covariates.html#cb88-13" aria-hidden="true" tabindex="-1"></a><span class="co">// var region = shapefile.geometry();</span></span></code></pre></div>
</div>
<div id="load-and-clip-the-covariates" class="section level3 hasAnchor" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span> Load and clip the covariates<a href="step-2-download-environmental-covariates.html#load-and-clip-the-covariates" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This script loads an asset collection into an Earth Engine (EE) image collection and clips each image in the collection to a specific region of interest (ROI).</p>
<p>First, the ee.ImageCollection function is used to load the assets into an EE image collection. The assets variable is expected to be a list of asset IDs.</p>
<p>Next, the map function is applied to the image collection to clip each image to the specified ROI. The clip function clips the image to the given ROI, and toFloat() converts the data type of the clipped image to floating-point values. The result of this operation is a new EE image collection called clippedCollection, where each image has been clipped to the specified ROI.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb89-1"><a href="step-2-download-environmental-covariates.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Load assets as ImageCollection</span></span>
<span id="cb89-2"><a href="step-2-download-environmental-covariates.html#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> assetsCollection <span class="op">=</span> ee<span class="op">.</span><span class="fu">ImageCollection</span>(assets)<span class="op">;</span></span>
<span id="cb89-3"><a href="step-2-download-environmental-covariates.html#cb89-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-4"><a href="step-2-download-environmental-covariates.html#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Clip each image in the collection to the region of interest</span></span>
<span id="cb89-5"><a href="step-2-download-environmental-covariates.html#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> clippedCollection <span class="op">=</span> assetsCollection<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(img){</span>
<span id="cb89-6"><a href="step-2-download-environmental-covariates.html#cb89-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> img<span class="op">.</span><span class="fu">clip</span>(region)<span class="op">.</span><span class="fu">toFloat</span>()<span class="op">;</span></span>
<span id="cb89-7"><a href="step-2-download-environmental-covariates.html#cb89-7" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
</div>
<div id="clean-holes-in-fpar-layers" class="section level3 hasAnchor" number="7.2.4">
<h3><span class="header-section-number">7.2.4</span> Clean holes in FPAR layers<a href="step-2-download-environmental-covariates.html#clean-holes-in-fpar-layers" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The Fraction of Photosynthetically Active Radiation (FPAR) MODIS product represents the fraction of incident photosynthetically active radiation (PAR) that is absorbed by vegetation. This product is calculated from satellite-based observations of surface reflectance, and it is commonly used to estimate vegetation growth and productivity.</p>
<p>In some areas, the FPAR MODIS product contains no data values in areas where the vegatation is scarce or absent. To avoin transferring these holes to the digital soil maps, we covert no data values to zeroes.
The rest of the script in this section is to reclip the rasters, stack them in a single object and rename them.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb90-1"><a href="step-2-download-environmental-covariates.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Function to replace masked values with zeroes for fpar bands</span></span>
<span id="cb90-2"><a href="step-2-download-environmental-covariates.html#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">replaceMaskedFpar</span>(img) {</span>
<span id="cb90-3"><a href="step-2-download-environmental-covariates.html#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> allBands <span class="op">=</span> img<span class="op">.</span><span class="fu">bandNames</span>()<span class="op">;</span></span>
<span id="cb90-4"><a href="step-2-download-environmental-covariates.html#cb90-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> fparBands <span class="op">=</span> allBands<span class="op">.</span><span class="fu">filter</span>(ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">stringStartsWith</span>(<span class="st">&#39;item&#39;</span><span class="op">,</span> <span class="st">&#39;fpar&#39;</span>))<span class="op">;</span></span>
<span id="cb90-5"><a href="step-2-download-environmental-covariates.html#cb90-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> nonFparBands <span class="op">=</span> allBands<span class="op">.</span><span class="fu">removeAll</span>(fparBands)<span class="op">;</span></span>
<span id="cb90-6"><a href="step-2-download-environmental-covariates.html#cb90-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb90-7"><a href="step-2-download-environmental-covariates.html#cb90-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> fparImg <span class="op">=</span> img<span class="op">.</span><span class="fu">select</span>(fparBands)<span class="op">.</span><span class="fu">unmask</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb90-8"><a href="step-2-download-environmental-covariates.html#cb90-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> nonFparImg <span class="op">=</span> img<span class="op">.</span><span class="fu">select</span>(nonFparBands)<span class="op">;</span></span>
<span id="cb90-9"><a href="step-2-download-environmental-covariates.html#cb90-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb90-10"><a href="step-2-download-environmental-covariates.html#cb90-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">// If there are no fpar bands, return the original image</span></span>
<span id="cb90-11"><a href="step-2-download-environmental-covariates.html#cb90-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> result <span class="op">=</span> ee<span class="op">.</span><span class="at">Algorithms</span><span class="op">.</span><span class="fu">If</span>(fparBands<span class="op">.</span><span class="fu">length</span>()<span class="op">.</span><span class="fu">eq</span>(<span class="dv">0</span>)<span class="op">,</span></span>
<span id="cb90-12"><a href="step-2-download-environmental-covariates.html#cb90-12" aria-hidden="true" tabindex="-1"></a>                                 img<span class="op">,</span></span>
<span id="cb90-13"><a href="step-2-download-environmental-covariates.html#cb90-13" aria-hidden="true" tabindex="-1"></a>                                 nonFparImg<span class="op">.</span><span class="fu">addBands</span>(fparImg))<span class="op">;</span></span>
<span id="cb90-14"><a href="step-2-download-environmental-covariates.html#cb90-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb90-15"><a href="step-2-download-environmental-covariates.html#cb90-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> ee<span class="op">.</span><span class="fu">Image</span>(result)<span class="op">;</span></span>
<span id="cb90-16"><a href="step-2-download-environmental-covariates.html#cb90-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb90-17"><a href="step-2-download-environmental-covariates.html#cb90-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-18"><a href="step-2-download-environmental-covariates.html#cb90-18" aria-hidden="true" tabindex="-1"></a><span class="co">// Clip each image in the collection to the region of interest and replace masked values for fpar bands</span></span>
<span id="cb90-19"><a href="step-2-download-environmental-covariates.html#cb90-19" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> clippedCollection <span class="op">=</span> assetsCollection<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(img){</span>
<span id="cb90-20"><a href="step-2-download-environmental-covariates.html#cb90-20" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> clippedImg <span class="op">=</span> img<span class="op">.</span><span class="fu">clip</span>(region)<span class="op">.</span><span class="fu">toFloat</span>()<span class="op">;</span></span>
<span id="cb90-21"><a href="step-2-download-environmental-covariates.html#cb90-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">replaceMaskedFpar</span>(clippedImg)<span class="op">;</span></span>
<span id="cb90-22"><a href="step-2-download-environmental-covariates.html#cb90-22" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb90-23"><a href="step-2-download-environmental-covariates.html#cb90-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-24"><a href="step-2-download-environmental-covariates.html#cb90-24" aria-hidden="true" tabindex="-1"></a><span class="co">// Stack the layers and maintain the layer names in the final file</span></span>
<span id="cb90-25"><a href="step-2-download-environmental-covariates.html#cb90-25" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> stacked <span class="op">=</span> clippedCollection<span class="op">.</span><span class="fu">toBands</span>()<span class="op">;</span></span>
<span id="cb90-26"><a href="step-2-download-environmental-covariates.html#cb90-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-27"><a href="step-2-download-environmental-covariates.html#cb90-27" aria-hidden="true" tabindex="-1"></a><span class="co">// Get the list of asset names</span></span>
<span id="cb90-28"><a href="step-2-download-environmental-covariates.html#cb90-28" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> assetNames <span class="op">=</span> ee<span class="op">.</span><span class="fu">List</span>(assets)<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(asset) {</span>
<span id="cb90-29"><a href="step-2-download-environmental-covariates.html#cb90-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> ee<span class="op">.</span><span class="fu">String</span>(asset)<span class="op">.</span><span class="fu">split</span>(<span class="st">&#39;/&#39;</span>)<span class="op">.</span><span class="fu">get</span>(<span class="op">-</span><span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb90-30"><a href="step-2-download-environmental-covariates.html#cb90-30" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb90-31"><a href="step-2-download-environmental-covariates.html#cb90-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-32"><a href="step-2-download-environmental-covariates.html#cb90-32" aria-hidden="true" tabindex="-1"></a><span class="co">// Rename the bands with asset names</span></span>
<span id="cb90-33"><a href="step-2-download-environmental-covariates.html#cb90-33" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> renamed <span class="op">=</span> stacked<span class="op">.</span><span class="fu">rename</span>(assetNames)<span class="op">;</span></span>
<span id="cb90-34"><a href="step-2-download-environmental-covariates.html#cb90-34" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(renamed<span class="op">,</span> <span class="st">&#39;Covariates to be exported&#39;</span>)</span></code></pre></div>
</div>
<div id="visualize-and-export-the-covariates" class="section level3 hasAnchor" number="7.2.5">
<h3><span class="header-section-number">7.2.5</span> Visualize and export the covariates<a href="step-2-download-environmental-covariates.html#visualize-and-export-the-covariates" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This script has two main parts: visualizing the result and exporting the stacked image to Google Drive.</p>
<p>In the first part, the script sets a visualization parameter (visParams) to define the visualization properties of the stacked image. Specifically, the script specifies that the visualization should use the ‘bio1’ band and a color palette with four colors to represent the range of values in the band. The min and max values are also set to control the range of values that are displayed.</p>
<p>Next, the script adds the renamed image (renamed) to the map and applies the visualization parameters defined in visParams. The Map.centerObject() function centers the map on the renamed image, and the Map.addLayer() function adds the image layer to the map with the specified name (‘Covariates’).</p>
<p>In the second part of the script, the Export.image.toDrive() function is used to export the stacked image to Google Drive. This function exports the renamed image as a GeoTIFF file with the description ‘covariates’, which is saved in the ‘GEE’ folder in the user’s Google Drive (you have to either create the folder in GDrive, or indicate a different target folder). The scale parameter specifies the spatial resolution of the exported image, while the maxPixels parameter sets the maximum number of pixels that can be exported. Finally, the region parameter specifies the geographic extent of the exported image, which is set to the region variable defined earlier in the script.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb91-1"><a href="step-2-download-environmental-covariates.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Visualize the result</span></span>
<span id="cb91-2"><a href="step-2-download-environmental-covariates.html#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Set a visualization parameter (you can adjust the colors as desired)</span></span>
<span id="cb91-3"><a href="step-2-download-environmental-covariates.html#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> visParams <span class="op">=</span> {</span>
<span id="cb91-4"><a href="step-2-download-environmental-covariates.html#cb91-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">bands</span><span class="op">:</span> <span class="st">&#39;bio1&#39;</span><span class="op">,</span></span>
<span id="cb91-5"><a href="step-2-download-environmental-covariates.html#cb91-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">min</span><span class="op">:</span> <span class="dv">19248</span><span class="op">,</span></span>
<span id="cb91-6"><a href="step-2-download-environmental-covariates.html#cb91-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">max</span><span class="op">:</span> <span class="dv">46139</span><span class="op">,</span></span>
<span id="cb91-7"><a href="step-2-download-environmental-covariates.html#cb91-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">palette</span><span class="op">:</span> [<span class="st">&#39;blue&#39;</span><span class="op">,</span> <span class="st">&#39;green&#39;</span><span class="op">,</span> <span class="st">&#39;yellow&#39;</span><span class="op">,</span> <span class="st">&#39;red&#39;</span>]</span>
<span id="cb91-8"><a href="step-2-download-environmental-covariates.html#cb91-8" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb91-9"><a href="step-2-download-environmental-covariates.html#cb91-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-10"><a href="step-2-download-environmental-covariates.html#cb91-10" aria-hidden="true" tabindex="-1"></a><span class="co">// Add the layer to the map</span></span>
<span id="cb91-11"><a href="step-2-download-environmental-covariates.html#cb91-11" aria-hidden="true" tabindex="-1"></a><span class="bu">Map</span><span class="op">.</span><span class="fu">centerObject</span>(renamed<span class="op">,</span> <span class="dv">6</span>)</span>
<span id="cb91-12"><a href="step-2-download-environmental-covariates.html#cb91-12" aria-hidden="true" tabindex="-1"></a><span class="bu">Map</span><span class="op">.</span><span class="fu">addLayer</span>(renamed<span class="op">,</span> visParams<span class="op">,</span> <span class="st">&#39;Covariates&#39;</span>)<span class="op">;</span></span>
<span id="cb91-13"><a href="step-2-download-environmental-covariates.html#cb91-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-14"><a href="step-2-download-environmental-covariates.html#cb91-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-15"><a href="step-2-download-environmental-covariates.html#cb91-15" aria-hidden="true" tabindex="-1"></a><span class="co">// Export the stacked image to Google Drive</span></span>
<span id="cb91-16"><a href="step-2-download-environmental-covariates.html#cb91-16" aria-hidden="true" tabindex="-1"></a>Export<span class="op">.</span><span class="at">image</span><span class="op">.</span><span class="fu">toDrive</span>({</span>
<span id="cb91-17"><a href="step-2-download-environmental-covariates.html#cb91-17" aria-hidden="true" tabindex="-1"></a>  <span class="dt">image</span><span class="op">:</span> renamed<span class="op">,</span></span>
<span id="cb91-18"><a href="step-2-download-environmental-covariates.html#cb91-18" aria-hidden="true" tabindex="-1"></a>  <span class="dt">description</span><span class="op">:</span> <span class="st">&#39;covariates&#39;</span><span class="op">,</span></span>
<span id="cb91-19"><a href="step-2-download-environmental-covariates.html#cb91-19" aria-hidden="true" tabindex="-1"></a>  <span class="dt">folder</span><span class="op">:</span> <span class="st">&#39;GEE&#39;</span><span class="op">,</span></span>
<span id="cb91-20"><a href="step-2-download-environmental-covariates.html#cb91-20" aria-hidden="true" tabindex="-1"></a>  <span class="dt">scale</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb91-21"><a href="step-2-download-environmental-covariates.html#cb91-21" aria-hidden="true" tabindex="-1"></a>  <span class="dt">maxPixels</span><span class="op">:</span> <span class="fl">1e13</span><span class="op">,</span></span>
<span id="cb91-22"><a href="step-2-download-environmental-covariates.html#cb91-22" aria-hidden="true" tabindex="-1"></a>  <span class="dt">region</span><span class="op">:</span> region</span>
<span id="cb91-23"><a href="step-2-download-environmental-covariates.html#cb91-23" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
</div>
<div id="load-and-clip-the-copernicus-land-cover-map-and" class="section level3 hasAnchor" number="7.2.6">
<h3><span class="header-section-number">7.2.6</span> Load and clip the Copernicus land cover map and<a href="step-2-download-environmental-covariates.html#load-and-clip-the-copernicus-land-cover-map-and" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This script loads an image collection of global land cover, selects the ‘discrete_classification’ band, and clips the image to a specified region. It then sets the CRS and spatial resolution of the output image, and applies resampling to change the spatial resolution to the desired value. The resulting image is stored in the variable image1.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb92-1"><a href="step-2-download-environmental-covariates.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* Create mask for croplands ----------------------------*/</span></span>
<span id="cb92-2"><a href="step-2-download-environmental-covariates.html#cb92-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-3"><a href="step-2-download-environmental-covariates.html#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Load the Copernicus Global Land Service image collection</span></span>
<span id="cb92-4"><a href="step-2-download-environmental-covariates.html#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> imageCollection <span class="op">=</span> ee<span class="op">.</span><span class="fu">Image</span>(<span class="st">&quot;COPERNICUS/Landcover/100m/Proba-V-C3/Global/2019&quot;</span>)</span>
<span id="cb92-5"><a href="step-2-download-environmental-covariates.html#cb92-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;discrete_classification&quot;</span>)</span>
<span id="cb92-6"><a href="step-2-download-environmental-covariates.html#cb92-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">clip</span>(region)</span>
<span id="cb92-7"><a href="step-2-download-environmental-covariates.html#cb92-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-8"><a href="step-2-download-environmental-covariates.html#cb92-8" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> crs <span class="op">=</span> <span class="st">&#39;EPSG:4326&#39;</span><span class="op">;</span> <span class="co">// WGS84</span></span>
<span id="cb92-9"><a href="step-2-download-environmental-covariates.html#cb92-9" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> res <span class="op">=</span> <span class="dv">250</span><span class="op">;</span> <span class="co">// Resolution in decimal degrees</span></span>
<span id="cb92-10"><a href="step-2-download-environmental-covariates.html#cb92-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-11"><a href="step-2-download-environmental-covariates.html#cb92-11" aria-hidden="true" tabindex="-1"></a><span class="co">// Default resampling is nearest neighbor</span></span>
<span id="cb92-12"><a href="step-2-download-environmental-covariates.html#cb92-12" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> image1 <span class="op">=</span> imageCollection<span class="op">.</span><span class="fu">resample</span>()</span>
<span id="cb92-13"><a href="step-2-download-environmental-covariates.html#cb92-13" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">reproject</span>({</span>
<span id="cb92-14"><a href="step-2-download-environmental-covariates.html#cb92-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">crs</span><span class="op">:</span> crs<span class="op">,</span> <span class="co">// Add your desired CRS here</span></span>
<span id="cb92-15"><a href="step-2-download-environmental-covariates.html#cb92-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">scale</span><span class="op">:</span> res <span class="co">// Add your desired scale here</span></span>
<span id="cb92-16"><a href="step-2-download-environmental-covariates.html#cb92-16" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span></code></pre></div>
</div>
<div id="reclassify-the-land-cover-map" class="section level3 hasAnchor" number="7.2.7">
<h3><span class="header-section-number">7.2.7</span> Reclassify the land cover map<a href="step-2-download-environmental-covariates.html#reclassify-the-land-cover-map" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This script reclassifies the land cover classes of the image1 using the remap function, which replaces the values in inList with the corresponding values in outList. We only keep class 40 which refer to Cultivated and managed vegetation / agriculture. The resulting image is then converted to a double data type, clipped to a specified region, and stored in the variable FAO_lu. The script then converts all 0 values in FAO_lu to NA values using the updateMask function and stores the resulting masked image in FAO_lu. The intermediate results are printed using the print function.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb93-1"><a href="step-2-download-environmental-covariates.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Reclassify the land cover classes</span></span>
<span id="cb93-2"><a href="step-2-download-environmental-covariates.html#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> inList <span class="op">=</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">50</span><span class="op">,</span> <span class="dv">60</span><span class="op">,</span> <span class="dv">70</span><span class="op">,</span> <span class="dv">80</span><span class="op">,</span> <span class="dv">90</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="dv">111</span><span class="op">,</span> <span class="dv">112</span><span class="op">,</span> <span class="dv">113</span><span class="op">,</span> <span class="dv">114</span><span class="op">,</span> <span class="dv">115</span><span class="op">,</span> <span class="dv">116</span><span class="op">,</span> </span>
<span id="cb93-3"><a href="step-2-download-environmental-covariates.html#cb93-3" aria-hidden="true" tabindex="-1"></a>              <span class="dv">121</span><span class="op">,</span> <span class="dv">122</span><span class="op">,</span> <span class="dv">123</span><span class="op">,</span> <span class="dv">124</span><span class="op">,</span> <span class="dv">125</span><span class="op">,</span> <span class="dv">126</span><span class="op">,</span> <span class="dv">200</span>]<span class="op">;</span></span>
<span id="cb93-4"><a href="step-2-download-environmental-covariates.html#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> outList <span class="op">=</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb93-5"><a href="step-2-download-environmental-covariates.html#cb93-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-6"><a href="step-2-download-environmental-covariates.html#cb93-6" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> FAO_lu <span class="op">=</span> image1<span class="op">.</span><span class="fu">remap</span>(inList<span class="op">,</span> outList)</span>
<span id="cb93-7"><a href="step-2-download-environmental-covariates.html#cb93-7" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">toDouble</span>()</span>
<span id="cb93-8"><a href="step-2-download-environmental-covariates.html#cb93-8" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">clip</span>(region)<span class="op">;</span></span>
<span id="cb93-9"><a href="step-2-download-environmental-covariates.html#cb93-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-10"><a href="step-2-download-environmental-covariates.html#cb93-10" aria-hidden="true" tabindex="-1"></a><span class="co">// print(FAO_lu)</span></span>
<span id="cb93-11"><a href="step-2-download-environmental-covariates.html#cb93-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-12"><a href="step-2-download-environmental-covariates.html#cb93-12" aria-hidden="true" tabindex="-1"></a><span class="co">// Convert 0 to NA</span></span>
<span id="cb93-13"><a href="step-2-download-environmental-covariates.html#cb93-13" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> mask <span class="op">=</span> FAO_lu<span class="op">.</span><span class="fu">neq</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb93-14"><a href="step-2-download-environmental-covariates.html#cb93-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mask)</span>
<span id="cb93-15"><a href="step-2-download-environmental-covariates.html#cb93-15" aria-hidden="true" tabindex="-1"></a>FAO_lu <span class="op">=</span> FAO_lu<span class="op">.</span><span class="fu">updateMask</span>(mask)<span class="op">;</span></span>
<span id="cb93-16"><a href="step-2-download-environmental-covariates.html#cb93-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-17"><a href="step-2-download-environmental-covariates.html#cb93-17" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(FAO_lu<span class="op">,</span> <span class="st">&quot;Mask&quot;</span>)</span></code></pre></div>
</div>
<div id="visualization-and-exporting-mask" class="section level3 hasAnchor" number="7.2.8">
<h3><span class="header-section-number">7.2.8</span> Visualization and exporting mask<a href="step-2-download-environmental-covariates.html#visualization-and-exporting-mask" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The code sets up visualization parameters for the reclassified land cover image and adds it as a layer to the map using the Map.addLayer function. The resulting image is then exported as a raster to Google Drive using the Export.image.toDrive function with specified parameters such as the folder to save the image, the desired scale and CRS, the region of interest, and the maximum number of pixels for export if needed. The resulting image is a binary mask where 1 represents the forest class and 0 represents all other classes.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb94-1"><a href="step-2-download-environmental-covariates.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> visParams <span class="op">=</span> {</span>
<span id="cb94-2"><a href="step-2-download-environmental-covariates.html#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">bands</span><span class="op">:</span> <span class="st">&#39;remapped&#39;</span><span class="op">,</span></span>
<span id="cb94-3"><a href="step-2-download-environmental-covariates.html#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">min</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb94-4"><a href="step-2-download-environmental-covariates.html#cb94-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">max</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb94-5"><a href="step-2-download-environmental-covariates.html#cb94-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">palette</span><span class="op">:</span> [<span class="st">&#39;green&#39;</span><span class="op">,</span> <span class="st">&#39;yellow&#39;</span>]</span>
<span id="cb94-6"><a href="step-2-download-environmental-covariates.html#cb94-6" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb94-7"><a href="step-2-download-environmental-covariates.html#cb94-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-8"><a href="step-2-download-environmental-covariates.html#cb94-8" aria-hidden="true" tabindex="-1"></a><span class="co">// Add the layer to the map</span></span>
<span id="cb94-9"><a href="step-2-download-environmental-covariates.html#cb94-9" aria-hidden="true" tabindex="-1"></a><span class="bu">Map</span><span class="op">.</span><span class="fu">addLayer</span>(FAO_lu<span class="op">,</span>visParams <span class="op">,</span><span class="st">&#39;Mask&#39;</span>)<span class="op">;</span></span>
<span id="cb94-10"><a href="step-2-download-environmental-covariates.html#cb94-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-11"><a href="step-2-download-environmental-covariates.html#cb94-11" aria-hidden="true" tabindex="-1"></a><span class="co">// Export the land cover image as a raster to Google Drive</span></span>
<span id="cb94-12"><a href="step-2-download-environmental-covariates.html#cb94-12" aria-hidden="true" tabindex="-1"></a>Export<span class="op">.</span><span class="at">image</span><span class="op">.</span><span class="fu">toDrive</span>({</span>
<span id="cb94-13"><a href="step-2-download-environmental-covariates.html#cb94-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">image</span><span class="op">:</span> FAO_lu<span class="op">,</span></span>
<span id="cb94-14"><a href="step-2-download-environmental-covariates.html#cb94-14" aria-hidden="true" tabindex="-1"></a>  <span class="dt">folder</span><span class="op">:</span> <span class="st">&#39;GEE&#39;</span><span class="op">,</span></span>
<span id="cb94-15"><a href="step-2-download-environmental-covariates.html#cb94-15" aria-hidden="true" tabindex="-1"></a>  <span class="dt">description</span><span class="op">:</span> <span class="st">&#39;mask&#39;</span><span class="op">,</span></span>
<span id="cb94-16"><a href="step-2-download-environmental-covariates.html#cb94-16" aria-hidden="true" tabindex="-1"></a>  <span class="dt">scale</span><span class="op">:</span> res<span class="op">,</span> <span class="co">// Add your desired scale here</span></span>
<span id="cb94-17"><a href="step-2-download-environmental-covariates.html#cb94-17" aria-hidden="true" tabindex="-1"></a>  <span class="dt">region</span><span class="op">:</span> region<span class="op">,</span></span>
<span id="cb94-18"><a href="step-2-download-environmental-covariates.html#cb94-18" aria-hidden="true" tabindex="-1"></a>  <span class="dt">crs</span><span class="op">:</span> crs<span class="op">,</span> <span class="co">// Add your desired CRS here</span></span>
<span id="cb94-19"><a href="step-2-download-environmental-covariates.html#cb94-19" aria-hidden="true" tabindex="-1"></a>  <span class="dt">maxPixels</span><span class="op">:</span> <span class="fl">1e13</span> <span class="co">// Add a maximum number of pixels for export if needed</span></span>
<span id="cb94-20"><a href="step-2-download-environmental-covariates.html#cb94-20" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
</div>
</div>
<div id="run-and-export-in-gee" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Run and export in GEE<a href="step-2-download-environmental-covariates.html#run-and-export-in-gee" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To execute a script in GEE, you can run it by clicking the “Run” button in the upper right-hand corner of the code editor. The “Run” button in GEE executes the script and any tasks specified in the script, such as exporting files to Google Drive. The status of the task can be monitored in the “Tasks” tab.</p>
<div class="figure"><span style="display:block;" id="fig:RUN"></span>
<img src="images/GEE_export.png" alt="R Studio interface." width="946" />
<p class="caption">
Figure 7.2: R Studio interface.
</p>
</div>
<p>To run a task for exporting files to Google Drive in GEE, the Export.image.toDrive() function exports the image Google Drive. To start the task, you need to RUN the task, and it will be added to the GEE task list. You can monitor its progress and download the exported file once the task is complete.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="step-1-soil-data-preparation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="step-3-mapping-continuous-soil-properties.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["DSM_CG.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
},
"fig_caption": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
