<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Step 2: download environmental covariates | Technical Manual for Global Soil Nutrient and Nutrient Budgets map (GSNmap)</title>
  <meta name="description" content="GSNmap - Technical Manual" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Step 2: download environmental covariates | Technical Manual for Global Soil Nutrient and Nutrient Budgets map (GSNmap)" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="GSNmap - Technical Manual" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Step 2: download environmental covariates | Technical Manual for Global Soil Nutrient and Nutrient Budgets map (GSNmap)" />
  
  <meta name="twitter:description" content="GSNmap - Technical Manual" />
  

<meta name="author" content="FAO" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="step-1-soil-data-preparation.html"/>
<link rel="next" href="step-3-mapping-continuous-soil-properties.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Foreword</a></li>
<li class="chapter" data-level="" data-path="abbreviations-and-acronyms.html"><a href="abbreviations-and-acronyms.html"><i class="fa fa-check"></i>Abbreviations and acronyms</a></li>
<li class="chapter" data-level="" data-path="contributors.html"><a href="contributors.html"><i class="fa fa-check"></i>Contributors</a></li>
<li class="chapter" data-level="1" data-path="presentation.html"><a href="presentation.html"><i class="fa fa-check"></i><b>1</b> Presentation</a>
<ul>
<li class="chapter" data-level="1.1" data-path="presentation.html"><a href="presentation.html#background-and-objectives"><i class="fa fa-check"></i><b>1.1</b> Background and objectives</a></li>
<li class="chapter" data-level="1.2" data-path="presentation.html"><a href="presentation.html#global-soil-partnership"><i class="fa fa-check"></i><b>1.2</b> Global Soil Partnership</a></li>
<li class="chapter" data-level="1.3" data-path="presentation.html"><a href="presentation.html#country-driven-approach-and-tasks"><i class="fa fa-check"></i><b>1.3</b> Country-driven approach and tasks</a></li>
<li class="chapter" data-level="1.4" data-path="presentation.html"><a href="presentation.html#how-to-use-this-book"><i class="fa fa-check"></i><b>1.4</b> How to use this book</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="soil-nutrients.html"><a href="soil-nutrients.html"><i class="fa fa-check"></i><b>2</b> Soil Nutrients</a>
<ul>
<li class="chapter" data-level="2.1" data-path="soil-nutrients.html"><a href="soil-nutrients.html#definition-of-soil-nutrients"><i class="fa fa-check"></i><b>2.1</b> Definition of soil nutrients</a></li>
<li class="chapter" data-level="2.2" data-path="soil-nutrients.html"><a href="soil-nutrients.html#soil-properties-governing-nutrient-availability"><i class="fa fa-check"></i><b>2.2</b> Soil properties governing nutrient availability</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html"><i class="fa fa-check"></i><b>3</b> Setting-up the software environment</a>
<ul>
<li class="chapter" data-level="3.1" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#use-of-r-rstudio-and-r-packages"><i class="fa fa-check"></i><b>3.1</b> Use of R, RStudio and R Packages</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#obtaining-and-installing-r"><i class="fa fa-check"></i><b>3.1.1</b> Obtaining and installing R</a></li>
<li class="chapter" data-level="3.1.2" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#obtaining-and-installing-rstudio"><i class="fa fa-check"></i><b>3.1.2</b> Obtaining and installing RStudio</a></li>
<li class="chapter" data-level="3.1.3" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#getting-started-with-r"><i class="fa fa-check"></i><b>3.1.3</b> Getting started with R</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#r-packages"><i class="fa fa-check"></i><b>3.2</b> R packages</a></li>
<li class="chapter" data-level="3.3" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#gee---google-earth-engine"><i class="fa fa-check"></i><b>3.3</b> GEE - google earth engine</a></li>
<li class="chapter" data-level="3.4" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#rgee---extension-to-use-google-earth-engine-in-r"><i class="fa fa-check"></i><b>3.4</b> rgee - Extension to use google earth engine in R</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="digital-soil-mapping.html"><a href="digital-soil-mapping.html"><i class="fa fa-check"></i><b>4</b> Digital Soil Mapping</a>
<ul>
<li class="chapter" data-level="4.1" data-path="digital-soil-mapping.html"><a href="digital-soil-mapping.html#principles"><i class="fa fa-check"></i><b>4.1</b> Principles</a></li>
<li class="chapter" data-level="4.2" data-path="digital-soil-mapping.html"><a href="digital-soil-mapping.html#environmental-covariates"><i class="fa fa-check"></i><b>4.2</b> Environmental covariates</a></li>
<li class="chapter" data-level="4.3" data-path="digital-soil-mapping.html"><a href="digital-soil-mapping.html#machine-learning-techniques"><i class="fa fa-check"></i><b>4.3</b> Machine learning techniques</a></li>
<li class="chapter" data-level="4.4" data-path="digital-soil-mapping.html"><a href="digital-soil-mapping.html#mapping-of-soil-nutrients-and-associated-soil-attributes"><i class="fa fa-check"></i><b>4.4</b> Mapping of soil nutrients and associated soil attributes</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html"><i class="fa fa-check"></i><b>5</b> Step 1: soil data preparation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#format-requirements-of-soil-data"><i class="fa fa-check"></i><b>5.1</b> Format requirements of soil data</a></li>
<li class="chapter" data-level="5.2" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#preparatory-steps"><i class="fa fa-check"></i><b>5.2</b> Preparatory steps</a></li>
<li class="chapter" data-level="5.3" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#data-quality-check"><i class="fa fa-check"></i><b>5.3</b> Data quality check</a></li>
<li class="chapter" data-level="5.4" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#calculation-of-pedo-transfer-functions"><i class="fa fa-check"></i><b>5.4</b> Calculation of pedo-transfer functions</a></li>
<li class="chapter" data-level="5.5" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#check-for-outliers"><i class="fa fa-check"></i><b>5.5</b> Check for outliers</a></li>
<li class="chapter" data-level="5.6" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#harmonise-soil-layer-depths"><i class="fa fa-check"></i><b>5.6</b> Harmonise soil layer depths</a></li>
<li class="chapter" data-level="5.7" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#save-the-results"><i class="fa fa-check"></i><b>5.7</b> Save the results</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html"><i class="fa fa-check"></i><b>6</b> Step 2: download environmental covariates</a>
<ul>
<li class="chapter" data-level="6.1" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#environmental-covariates-1"><i class="fa fa-check"></i><b>6.1</b> Environmental covariates</a></li>
<li class="chapter" data-level="6.2" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#reducing-collinearity-in-environmental-covariates"><i class="fa fa-check"></i><b>6.2</b> Reducing collinearity in environmental covariates</a></li>
<li class="chapter" data-level="6.3" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#merging-soil-data-and-environmental-covariates"><i class="fa fa-check"></i><b>6.3</b> Merging soil data and environmental covariates</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="step-3-mapping-continuous-soil-properties.html"><a href="step-3-mapping-continuous-soil-properties.html"><i class="fa fa-check"></i><b>7</b> Step 3: Mapping continuous soil properties</a>
<ul>
<li class="chapter" data-level="7.1" data-path="step-3-mapping-continuous-soil-properties.html"><a href="step-3-mapping-continuous-soil-properties.html#setting-up-repeated-k-fold-cross-validation"><i class="fa fa-check"></i><b>7.1</b> Setting up repeated k-fold cross validation</a></li>
<li class="chapter" data-level="7.2" data-path="step-3-mapping-continuous-soil-properties.html"><a href="step-3-mapping-continuous-soil-properties.html#model-calibration"><i class="fa fa-check"></i><b>7.2</b> Model calibration</a></li>
<li class="chapter" data-level="7.3" data-path="step-3-mapping-continuous-soil-properties.html"><a href="step-3-mapping-continuous-soil-properties.html#predicting-soil-attributes"><i class="fa fa-check"></i><b>7.3</b> Predicting soil attributes</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="step-4-uncertainty-assessment.html"><a href="step-4-uncertainty-assessment.html"><i class="fa fa-check"></i><b>8</b> Step 4: uncertainty assessment</a>
<ul>
<li class="chapter" data-level="8.1" data-path="step-4-uncertainty-assessment.html"><a href="step-4-uncertainty-assessment.html#introduction"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="compendium-of-r-scripts.html"><a href="compendium-of-r-scripts.html"><i class="fa fa-check"></i><b>9</b> Compendium of R scripts</a>
<ul>
<li class="chapter" data-level="9.1" data-path="compendium-of-r-scripts.html"><a href="compendium-of-r-scripts.html#data-preparation"><i class="fa fa-check"></i><b>9.1</b> Data preparation</a></li>
<li class="chapter" data-level="9.2" data-path="compendium-of-r-scripts.html"><a href="compendium-of-r-scripts.html#download-environmental-covariates"><i class="fa fa-check"></i><b>9.2</b> Download environmental covariates</a></li>
<li class="chapter" data-level="9.3" data-path="compendium-of-r-scripts.html"><a href="compendium-of-r-scripts.html#modelling-validation-and-prediction-using-soil-data-with-coordinates"><i class="fa fa-check"></i><b>9.3</b> Modelling, validation and prediction using soil data with coordinates</a></li>
<li class="chapter" data-level="9.4" data-path="compendium-of-r-scripts.html"><a href="compendium-of-r-scripts.html#annex-a-r-scripts-for-extra-functions"><i class="fa fa-check"></i><b>9.4</b> Annex A: R scripts for extra functions</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="reporting-results.html"><a href="reporting-results.html"><i class="fa fa-check"></i><b>10</b> Reporting results</a></li>
<li class="chapter" data-level="11" data-path="way-forward.html"><a href="way-forward.html"><i class="fa fa-check"></i><b>11</b> Way forward</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Technical Manual for Global Soil Nutrient and Nutrient Budgets map (GSNmap)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="step-2-download-environmental-covariates" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Step 2: download environmental covariates<a href="step-2-download-environmental-covariates.html#step-2-download-environmental-covariates" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="environmental-covariates-1" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Environmental covariates<a href="step-2-download-environmental-covariates.html#environmental-covariates-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The SCORPAN equation (Eq. <span class="math inline">\(\ref{eq:scorpan}\)</span>) refers to the soil-forming factors that determine the spatial variation of soils. However, these factors cannot be measured directly. Instead, proxies of these soil forming factors are used. One essential characteristic of the environmental covariates is that they are spatially explicit, covering the whole study area. Table 2 shows a summary of the environmental covariates that can be implemented under the DSM framework.</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:table6.1)List of covariates.
</caption>
<thead>
<tr>
<th style="text-align:left;">
Description
</th>
<th style="text-align:left;">
Code
</th>
<th style="text-align:left;">
Resolution m
</th>
</tr>
</thead>
<tbody>
<tr grouplength="3">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Temperature</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean air temperature (annual)
</td>
<td style="text-align:left;">
bio1
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean daily temperature of warmest month
</td>
<td style="text-align:left;">
bio5
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean daily temperature of coldest month
</td>
<td style="text-align:left;">
bio6
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr grouplength="5">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Precipitation</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean annual precipitation
</td>
<td style="text-align:left;">
bio12
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean precipitation of wettest month
</td>
<td style="text-align:left;">
bio13
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean precipitation of driest month
</td>
<td style="text-align:left;">
bio14
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean monthly precipitation of wettest quarter
</td>
<td style="text-align:left;">
bio16
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean monthly precipitation of driest quarter
</td>
<td style="text-align:left;">
bio17
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr grouplength="4">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Potential evapotranspiration (PET)</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean monthly PET
</td>
<td style="text-align:left;">
pet_penman_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Minimum monthly PET
</td>
<td style="text-align:left;">
pet_penman_min
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Range monthly PET
</td>
<td style="text-align:left;">
pet_penman_range
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Maximum monthly PET
</td>
<td style="text-align:left;">
pet_penman_max
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr grouplength="3">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Wind</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Minimum monthly wind speed
</td>
<td style="text-align:left;">
sfcWind_min
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Maximum monthly wind speed
</td>
<td style="text-align:left;">
sfcWind_max
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Range monthly wind speed
</td>
<td style="text-align:left;">
sfcWind_range
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr grouplength="2">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Growing season</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Number of days with mean daily air
</td>
<td style="text-align:left;">
ngd10
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
temperature above 10 degrees Celsius
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr grouplength="8">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Vegetation indices (NDVI (MOD13Q1))</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean March-May from 2000-2022
</td>
<td style="text-align:left;">
ndvi_030405_mean
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean June-August from 2000-2022
</td>
<td style="text-align:left;">
ndvi_060708_mean
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean September-November from 2000-2022
</td>
<td style="text-align:left;">
ndvi_091011_mean
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean December-February from 2000-2022
</td>
<td style="text-align:left;">
ndvi_120102_mean
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation March-May (2000-2022)
</td>
<td style="text-align:left;">
ndvi_030405_sd
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation June-August (2000-2022)
</td>
<td style="text-align:left;">
ndvi_060708_sd
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation Sept.-Nov. (2000-2022)
</td>
<td style="text-align:left;">
ndvi_091011_sd
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation Dec.-Feb. (2000-2022)
</td>
<td style="text-align:left;">
ndvi_120102_sd
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr grouplength="8">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Fraction of photosynthetically active radiation (FPAR) (MOD15A2H)</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean March-May from 2000-2022
</td>
<td style="text-align:left;">
fpar_030405_mean
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean June-August from 2000-2022
</td>
<td style="text-align:left;">
fpar_060708_mean
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean September-November from 2000-2022
</td>
<td style="text-align:left;">
fpar_091011_mean
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean December-February from 2000-2022
</td>
<td style="text-align:left;">
fpar_120102_mean
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation March-May (2000-2022)
</td>
<td style="text-align:left;">
fpar_030405_sd
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation June-August (2000-2022)
</td>
<td style="text-align:left;">
fpar_060708_sd
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation Sept.-Nov. (2000-2022)
</td>
<td style="text-align:left;">
fpar_091011_sd
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation Dec.-Feb. (2000-2022)
</td>
<td style="text-align:left;">
fpar_120102_sd
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr grouplength="8">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Land surface temperature day (LSTD) (MOD11A2)</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean March-May from 2000-2022
</td>
<td style="text-align:left;">
lstd_030405_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean June-August from 2000-2022
</td>
<td style="text-align:left;">
lstd_060708_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean September-November from 2000-2022
</td>
<td style="text-align:left;">
lstd_091011_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean December-February from 2000-2022
</td>
<td style="text-align:left;">
lstd_120102_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation March-May (2000-2022)
</td>
<td style="text-align:left;">
lstd_030405_sd
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation June-August (2000-2022)
</td>
<td style="text-align:left;">
lstd_060708_sd
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation Sept.-Nov. (2000-2022)
</td>
<td style="text-align:left;">
lstd_091011_sd
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation Dec.-Feb. (2000-2022)
</td>
<td style="text-align:left;">
lstd_120102_sd
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr grouplength="8">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Normalised difference between LST day and LST night (MOD11A2)</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean March-May from 2000-2022
</td>
<td style="text-align:left;">
ndlstd_030405_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean June-August from 2000-2022
</td>
<td style="text-align:left;">
ndlstd_060708_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean September-November from 2000-2022
</td>
<td style="text-align:left;">
ndlstd_091011_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean December-February from 2000-2022
</td>
<td style="text-align:left;">
ndlstd_120102_mean
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation March-May (2000-2022)
</td>
<td style="text-align:left;">
ndlstd_030405_sd
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation June-August (2000-2022)
</td>
<td style="text-align:left;">
ndlstd_060708_sd
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation Sept.-Nov. (2000-2022)
</td>
<td style="text-align:left;">
ndlstd_091011_sd
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Standard deviation Dec.-Feb. (2000-2022)
</td>
<td style="text-align:left;">
ndlstd_120102_sd
</td>
<td style="text-align:left;">
1000
</td>
</tr>
<tr grouplength="1">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Short-wave Infrared (SWIR) black-sky albedo for shortwave broadband (MCD43A3)</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean June-August from 2000-2022
</td>
<td style="text-align:left;">
swir_060708_mean
</td>
<td style="text-align:left;">
5–
</td>
</tr>
<tr grouplength="1">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>MODIS snow cover (MOD10A1)</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean snow cover
</td>
<td style="text-align:left;">
mean_snow_cover
</td>
<td style="text-align:left;">
500
</td>
</tr>
<tr grouplength="9">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Land cover dynamic world 10m near real-time land use/land cover (LULC) dataset</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean estimated probability of complete coverage by trees
</td>
<td style="text-align:left;">
trees
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean estimated probability of complete coverage
</td>
<td style="text-align:left;">
shrub_and_scrub
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
by shrub and scrub
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean estimated probability of complete coverage
</td>
<td style="text-align:left;">
flooded_vegetation
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
by flooded vegetation
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean estimated probability of complete coverage
</td>
<td style="text-align:left;">
grass
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
by grasses
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Mean estimated probability of complete coverage
</td>
<td style="text-align:left;">
crop
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
by bare
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr grouplength="13">
<td colspan="3" style="background-color: #666; color: #fff;">
<strong>Terrain</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Profile curvature
</td>
<td style="text-align:left;">
curvature
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Downslope curvature
</td>
<td style="text-align:left;">
downslopecurvature
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Upslope curvature
</td>
<td style="text-align:left;">
upslopecurvature
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Deviation from mean value
</td>
<td style="text-align:left;">
dvm
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
deviation from mean value
</td>
<td style="text-align:left;">
dvm2
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Elevation
</td>
<td style="text-align:left;">
elevation
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Melton ruggedness number
</td>
<td style="text-align:left;">
mrn
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Negative openness
</td>
<td style="text-align:left;">
neg-openness
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Positive openness
</td>
<td style="text-align:left;">
pos-openness
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Slope
</td>
<td style="text-align:left;">
slope
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Topographic position index
</td>
<td style="text-align:left;">
tpi
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Terrain wetness index
</td>
<td style="text-align:left;">
twi
</td>
<td style="text-align:left;">
250
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Multiresolution of valley bottom flatness
</td>
<td style="text-align:left;">
vbf
</td>
<td style="text-align:left;">
250
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="step-2-download-environmental-covariates.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Empty environment and cache</span></span>
<span id="cb16-2"><a href="step-2-download-environmental-covariates.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>());</span>
<span id="cb16-3"><a href="step-2-download-environmental-covariates.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>()</span>
<span id="cb16-4"><a href="step-2-download-environmental-covariates.html#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="step-2-download-environmental-covariates.html#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Content of this script =======================================================</span></span>
<span id="cb16-6"><a href="step-2-download-environmental-covariates.html#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co"># The goal of this script is to organise to clip and dowload the covariates and </span></span>
<span id="cb16-7"><a href="step-2-download-environmental-covariates.html#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># it includes the following steps:</span></span>
<span id="cb16-8"><a href="step-2-download-environmental-covariates.html#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb16-9"><a href="step-2-download-environmental-covariates.html#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 0 -User-defined variables </span></span>
<span id="cb16-10"><a href="step-2-download-environmental-covariates.html#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 1 - Set working directory and load necessary packages</span></span>
<span id="cb16-11"><a href="step-2-download-environmental-covariates.html#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2 - Import shapefile</span></span>
<span id="cb16-12"><a href="step-2-download-environmental-covariates.html#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 3 - Overview of covariates </span></span>
<span id="cb16-13"><a href="step-2-download-environmental-covariates.html#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 4 - Initialize GEE</span></span>
<span id="cb16-14"><a href="step-2-download-environmental-covariates.html#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 5 - Upload shapefile to GEE OR use uploaded UN borders</span></span>
<span id="cb16-15"><a href="step-2-download-environmental-covariates.html#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 6 - Clip and download the covariates</span></span>
<span id="cb16-16"><a href="step-2-download-environmental-covariates.html#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="co">#_______________________________________________________________________________</span></span>
<span id="cb16-17"><a href="step-2-download-environmental-covariates.html#cb16-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-18"><a href="step-2-download-environmental-covariates.html#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="step-2-download-environmental-covariates.html#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 0 - User-defined variables ===================================================</span></span>
<span id="cb16-20"><a href="step-2-download-environmental-covariates.html#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Working directory</span></span>
<span id="cb16-21"><a href="step-2-download-environmental-covariates.html#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="co">#wd &lt;- &#39;C:/Users/luottoi/Documents/GitHub/Digital-Soil-Mapping&#39;</span></span>
<span id="cb16-22"><a href="step-2-download-environmental-covariates.html#cb16-22" aria-hidden="true" tabindex="-1"></a>wd <span class="ot">&lt;-</span> <span class="st">&#39;C:/GIT/Digital-Soil-Mapping&#39;</span></span>
<span id="cb16-23"><a href="step-2-download-environmental-covariates.html#cb16-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-24"><a href="step-2-download-environmental-covariates.html#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Output covariate folder</span></span>
<span id="cb16-25"><a href="step-2-download-environmental-covariates.html#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="co">#output_dir &lt;-&#39;&#39;</span></span>
<span id="cb16-26"><a href="step-2-download-environmental-covariates.html#cb16-26" aria-hidden="true" tabindex="-1"></a>output_dir <span class="ot">&lt;-</span><span class="st">&#39;01-Data/covs/&#39;</span></span>
<span id="cb16-27"><a href="step-2-download-environmental-covariates.html#cb16-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-28"><a href="step-2-download-environmental-covariates.html#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Area of interest: either own shapefile or 3-digit ISO code to extract from </span></span>
<span id="cb16-29"><a href="step-2-download-environmental-covariates.html#cb16-29" aria-hidden="true" tabindex="-1"></a><span class="co"># UN 2020 boundaries</span></span>
<span id="cb16-30"><a href="step-2-download-environmental-covariates.html#cb16-30" aria-hidden="true" tabindex="-1"></a>AOI <span class="ot">&lt;-</span> <span class="st">&#39;01-Data/AOI_Arg.shp&#39;</span></span>
<span id="cb16-31"><a href="step-2-download-environmental-covariates.html#cb16-31" aria-hidden="true" tabindex="-1"></a><span class="co"># AOI &lt;- &#39;MKD&#39;</span></span>
<span id="cb16-32"><a href="step-2-download-environmental-covariates.html#cb16-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Resolution and projection</span></span>
<span id="cb16-33"><a href="step-2-download-environmental-covariates.html#cb16-33" aria-hidden="true" tabindex="-1"></a>res <span class="ot">=</span> <span class="dv">250</span></span>
<span id="cb16-34"><a href="step-2-download-environmental-covariates.html#cb16-34" aria-hidden="true" tabindex="-1"></a>crs <span class="ot">=</span> <span class="st">&quot;EPSG:4326&quot;</span></span>
<span id="cb16-35"><a href="step-2-download-environmental-covariates.html#cb16-35" aria-hidden="true" tabindex="-1"></a><span class="co">#_______________________________________________________________________________</span></span>
<span id="cb16-36"><a href="step-2-download-environmental-covariates.html#cb16-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-37"><a href="step-2-download-environmental-covariates.html#cb16-37" aria-hidden="true" tabindex="-1"></a><span class="co">#  1 - Set working directory and load necessary packages ======================= </span></span>
<span id="cb16-38"><a href="step-2-download-environmental-covariates.html#cb16-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Set working directory</span></span>
<span id="cb16-39"><a href="step-2-download-environmental-covariates.html#cb16-39" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(wd)</span>
<span id="cb16-40"><a href="step-2-download-environmental-covariates.html#cb16-40" aria-hidden="true" tabindex="-1"></a><span class="co">#load libraries</span></span>
<span id="cb16-41"><a href="step-2-download-environmental-covariates.html#cb16-41" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(raster)</span>
<span id="cb16-42"><a href="step-2-download-environmental-covariates.html#cb16-42" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb16-43"><a href="step-2-download-environmental-covariates.html#cb16-43" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb16-44"><a href="step-2-download-environmental-covariates.html#cb16-44" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rgee)</span>
<span id="cb16-45"><a href="step-2-download-environmental-covariates.html#cb16-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-46"><a href="step-2-download-environmental-covariates.html#cb16-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-47"><a href="step-2-download-environmental-covariates.html#cb16-47" aria-hidden="true" tabindex="-1"></a><span class="co"># 2 - Import shapefile =========================================================</span></span>
<span id="cb16-48"><a href="step-2-download-environmental-covariates.html#cb16-48" aria-hidden="true" tabindex="-1"></a>AOI <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(AOI)</span>
<span id="cb16-49"><a href="step-2-download-environmental-covariates.html#cb16-49" aria-hidden="true" tabindex="-1"></a><span class="co"># convert AOI to a box polygon</span></span>
<span id="cb16-50"><a href="step-2-download-environmental-covariates.html#cb16-50" aria-hidden="true" tabindex="-1"></a>AOI <span class="ot">&lt;-</span> <span class="fu">st_as_sfc</span>(<span class="fu">st_bbox</span>(AOI))</span>
<span id="cb16-51"><a href="step-2-download-environmental-covariates.html#cb16-51" aria-hidden="true" tabindex="-1"></a>AOI <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(AOI)</span>
<span id="cb16-52"><a href="step-2-download-environmental-covariates.html#cb16-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-53"><a href="step-2-download-environmental-covariates.html#cb16-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-54"><a href="step-2-download-environmental-covariates.html#cb16-54" aria-hidden="true" tabindex="-1"></a><span class="co"># 3 - Overview of covariates ===================================================</span></span>
<span id="cb16-55"><a href="step-2-download-environmental-covariates.html#cb16-55" aria-hidden="true" tabindex="-1"></a><span class="co"># CLIMATIC VARIABLES from CHELSA</span></span>
<span id="cb16-56"><a href="step-2-download-environmental-covariates.html#cb16-56" aria-hidden="true" tabindex="-1"></a><span class="co"># VEGETATION INDICES, FPAR and LAND SURFACE TEMPERATURE from MODIS</span></span>
<span id="cb16-57"><a href="step-2-download-environmental-covariates.html#cb16-57" aria-hidden="true" tabindex="-1"></a><span class="co"># LAND COVER LAYERS from Dynamic World 10m near-real-time (NRT) </span></span>
<span id="cb16-58"><a href="step-2-download-environmental-covariates.html#cb16-58" aria-hidden="true" tabindex="-1"></a><span class="co"># TERRAINE attributes from OpenLandMap</span></span>
<span id="cb16-59"><a href="step-2-download-environmental-covariates.html#cb16-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-60"><a href="step-2-download-environmental-covariates.html#cb16-60" aria-hidden="true" tabindex="-1"></a><span class="co"># for more information about the single covariates: open covariates.xslx in the </span></span>
<span id="cb16-61"><a href="step-2-download-environmental-covariates.html#cb16-61" aria-hidden="true" tabindex="-1"></a><span class="co"># training material folder</span></span>
<span id="cb16-62"><a href="step-2-download-environmental-covariates.html#cb16-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-63"><a href="step-2-download-environmental-covariates.html#cb16-63" aria-hidden="true" tabindex="-1"></a><span class="co"># 4 - Initialize GEE ===========================================================</span></span>
<span id="cb16-64"><a href="step-2-download-environmental-covariates.html#cb16-64" aria-hidden="true" tabindex="-1"></a><span class="fu">ee_Initialize</span>()</span>
<span id="cb16-65"><a href="step-2-download-environmental-covariates.html#cb16-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-66"><a href="step-2-download-environmental-covariates.html#cb16-66" aria-hidden="true" tabindex="-1"></a><span class="co"># 5 - Upload shapefile to GEE OR use uploaded UN borders =======================</span></span>
<span id="cb16-67"><a href="step-2-download-environmental-covariates.html#cb16-67" aria-hidden="true" tabindex="-1"></a><span class="do">## 5.1 Convert shp to gee geometry ---------------------------------------------</span></span>
<span id="cb16-68"><a href="step-2-download-environmental-covariates.html#cb16-68" aria-hidden="true" tabindex="-1"></a><span class="co">#region &lt;- sf_as_ee(AOI)</span></span>
<span id="cb16-69"><a href="step-2-download-environmental-covariates.html#cb16-69" aria-hidden="true" tabindex="-1"></a><span class="co">#region = region$geometry()</span></span>
<span id="cb16-70"><a href="step-2-download-environmental-covariates.html#cb16-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-71"><a href="step-2-download-environmental-covariates.html#cb16-71" aria-hidden="true" tabindex="-1"></a><span class="do">## 5.2 Extract from UN 2020 map using ISO code ---------------------------------</span></span>
<span id="cb16-72"><a href="step-2-download-environmental-covariates.html#cb16-72" aria-hidden="true" tabindex="-1"></a>region <span class="ot">&lt;-</span>ee<span class="sc">$</span><span class="fu">FeatureCollection</span>(<span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/UN_BORDERS/BNDA_CTY&quot;</span>)<span class="sc">%&gt;%</span></span>
<span id="cb16-73"><a href="step-2-download-environmental-covariates.html#cb16-73" aria-hidden="true" tabindex="-1"></a>  ee<span class="sc">$</span>FeatureCollection<span class="sc">$</span><span class="fu">filterMetadata</span>(<span class="st">&#39;ISO3CD&#39;</span>, <span class="st">&#39;equals&#39;</span>, AOI)</span>
<span id="cb16-74"><a href="step-2-download-environmental-covariates.html#cb16-74" aria-hidden="true" tabindex="-1"></a>region <span class="ot">=</span> region<span class="sc">$</span><span class="fu">geometry</span>()</span>
<span id="cb16-75"><a href="step-2-download-environmental-covariates.html#cb16-75" aria-hidden="true" tabindex="-1"></a><span class="co"># AOI_shp &lt;-ee_as_sf(region)</span></span>
<span id="cb16-76"><a href="step-2-download-environmental-covariates.html#cb16-76" aria-hidden="true" tabindex="-1"></a><span class="co"># AOI_shp &lt;- st_collection_extract(AOI_shp, &quot;POLYGON&quot;)</span></span>
<span id="cb16-77"><a href="step-2-download-environmental-covariates.html#cb16-77" aria-hidden="true" tabindex="-1"></a><span class="co"># write_sf(AOI_shp, paste0(&#39;01-Data/&#39;,AOI,&#39;.shp&#39;))</span></span>
<span id="cb16-78"><a href="step-2-download-environmental-covariates.html#cb16-78" aria-hidden="true" tabindex="-1"></a><span class="co"># aoi &lt;- vect(AOI_shp)</span></span>
<span id="cb16-79"><a href="step-2-download-environmental-covariates.html#cb16-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-80"><a href="step-2-download-environmental-covariates.html#cb16-80" aria-hidden="true" tabindex="-1"></a><span class="co"># 6 - Clip and download covariates ========================================</span></span>
<span id="cb16-81"><a href="step-2-download-environmental-covariates.html#cb16-81" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtain list of climatic variables</span></span>
<span id="cb16-82"><a href="step-2-download-environmental-covariates.html#cb16-82" aria-hidden="true" tabindex="-1"></a>assetname<span class="ot">&lt;-</span>  <span class="fu">rbind</span>(<span class="fu">ee_manage_assetlist</span>(<span class="at">path_asset =</span> <span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/CHELSA&quot;</span>),</span>
<span id="cb16-83"><a href="step-2-download-environmental-covariates.html#cb16-83" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">ee_manage_assetlist</span>(<span class="at">path_asset =</span> <span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/MODIS&quot;</span>),</span>
<span id="cb16-84"><a href="step-2-download-environmental-covariates.html#cb16-84" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">ee_manage_assetlist</span>(<span class="at">path_asset =</span> <span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/LANDCOVER&quot;</span>),</span>
<span id="cb16-85"><a href="step-2-download-environmental-covariates.html#cb16-85" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">ee_manage_assetlist</span>(<span class="at">path_asset =</span> <span class="st">&quot;projects/digital-soil-mapping-gsp-fao/assets/OPENLANDMAP&quot;</span>))</span>
<span id="cb16-86"><a href="step-2-download-environmental-covariates.html#cb16-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-87"><a href="step-2-download-environmental-covariates.html#cb16-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-88"><a href="step-2-download-environmental-covariates.html#cb16-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-89"><a href="step-2-download-environmental-covariates.html#cb16-89" aria-hidden="true" tabindex="-1"></a>assetname<span class="sc">$</span>num <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(assetname)</span>
<span id="cb16-90"><a href="step-2-download-environmental-covariates.html#cb16-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-91"><a href="step-2-download-environmental-covariates.html#cb16-91" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop over the names of assets to clip and dowload the covariates</span></span>
<span id="cb16-92"><a href="step-2-download-environmental-covariates.html#cb16-92" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">unique</span>(assetname<span class="sc">$</span>ID)){</span>
<span id="cb16-93"><a href="step-2-download-environmental-covariates.html#cb16-93" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-94"><a href="step-2-download-environmental-covariates.html#cb16-94" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Extract filename </span></span>
<span id="cb16-95"><a href="step-2-download-environmental-covariates.html#cb16-95" aria-hidden="true" tabindex="-1"></a>  filename <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">&#39;.*</span><span class="sc">\\</span><span class="st">/&#39;</span>, <span class="st">&#39;&#39;</span>, i)</span>
<span id="cb16-96"><a href="step-2-download-environmental-covariates.html#cb16-96" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-97"><a href="step-2-download-environmental-covariates.html#cb16-97" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Clip image to the extent of the AOI</span></span>
<span id="cb16-98"><a href="step-2-download-environmental-covariates.html#cb16-98" aria-hidden="true" tabindex="-1"></a>  image <span class="ot">&lt;-</span> ee<span class="sc">$</span><span class="fu">Image</span>(i) <span class="sc">%&gt;%</span></span>
<span id="cb16-99"><a href="step-2-download-environmental-covariates.html#cb16-99" aria-hidden="true" tabindex="-1"></a>    ee<span class="sc">$</span>Image<span class="sc">$</span><span class="fu">clip</span>(region)<span class="sc">%&gt;%</span></span>
<span id="cb16-100"><a href="step-2-download-environmental-covariates.html#cb16-100" aria-hidden="true" tabindex="-1"></a>    ee<span class="sc">$</span>Image<span class="sc">$</span><span class="fu">toFloat</span>()</span>
<span id="cb16-101"><a href="step-2-download-environmental-covariates.html#cb16-101" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-102"><a href="step-2-download-environmental-covariates.html#cb16-102" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Resample to target resolution</span></span>
<span id="cb16-103"><a href="step-2-download-environmental-covariates.html#cb16-103" aria-hidden="true" tabindex="-1"></a>  image <span class="ot">=</span> image<span class="sc">$</span><span class="fu">resample</span>(<span class="st">&#39;bilinear&#39;</span>)<span class="sc">$</span><span class="fu">reproject</span>(</span>
<span id="cb16-104"><a href="step-2-download-environmental-covariates.html#cb16-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">crs=</span> crs,</span>
<span id="cb16-105"><a href="step-2-download-environmental-covariates.html#cb16-105" aria-hidden="true" tabindex="-1"></a>    <span class="at">scale=</span> res)</span>
<span id="cb16-106"><a href="step-2-download-environmental-covariates.html#cb16-106" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-107"><a href="step-2-download-environmental-covariates.html#cb16-107" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-108"><a href="step-2-download-environmental-covariates.html#cb16-108" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Export clipped covariate as raster</span></span>
<span id="cb16-109"><a href="step-2-download-environmental-covariates.html#cb16-109" aria-hidden="true" tabindex="-1"></a>  raster <span class="ot">&lt;-</span> <span class="fu">ee_as_raster</span>(</span>
<span id="cb16-110"><a href="step-2-download-environmental-covariates.html#cb16-110" aria-hidden="true" tabindex="-1"></a>    <span class="at">image =</span> image,</span>
<span id="cb16-111"><a href="step-2-download-environmental-covariates.html#cb16-111" aria-hidden="true" tabindex="-1"></a>    <span class="at">scale=</span> res,</span>
<span id="cb16-112"><a href="step-2-download-environmental-covariates.html#cb16-112" aria-hidden="true" tabindex="-1"></a>    <span class="at">region =</span> region,</span>
<span id="cb16-113"><a href="step-2-download-environmental-covariates.html#cb16-113" aria-hidden="true" tabindex="-1"></a>    <span class="at">via =</span> <span class="st">&quot;drive&quot;</span>,</span>
<span id="cb16-114"><a href="step-2-download-environmental-covariates.html#cb16-114" aria-hidden="true" tabindex="-1"></a>    <span class="at">maxPixels =</span> <span class="fl">1e+12</span></span>
<span id="cb16-115"><a href="step-2-download-environmental-covariates.html#cb16-115" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb16-116"><a href="step-2-download-environmental-covariates.html#cb16-116" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-117"><a href="step-2-download-environmental-covariates.html#cb16-117" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(raster)</span>
<span id="cb16-118"><a href="step-2-download-environmental-covariates.html#cb16-118" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-119"><a href="step-2-download-environmental-covariates.html#cb16-119" aria-hidden="true" tabindex="-1"></a>  num <span class="ot">&lt;-</span> assetname[assetname<span class="sc">$</span>ID <span class="sc">==</span> i, <span class="st">&#39;num&#39;</span>]</span>
<span id="cb16-120"><a href="step-2-download-environmental-covariates.html#cb16-120" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-121"><a href="step-2-download-environmental-covariates.html#cb16-121" aria-hidden="true" tabindex="-1"></a>  <span class="fu">writeRaster</span>(raster, <span class="fu">paste0</span>(output_dir,filename, <span class="st">&#39;.tif&#39;</span>), <span class="at">overwrite=</span>T)</span>
<span id="cb16-122"><a href="step-2-download-environmental-covariates.html#cb16-122" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(filename, <span class="st">&#39;exported successfully - Covariate&#39;</span>,num, <span class="st">&#39;out of 68&#39;</span>))</span>
<span id="cb16-123"><a href="step-2-download-environmental-covariates.html#cb16-123" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Apart from the environmental covariates mentioned in Table <span class="math inline">\(\ref{tab:covs}\)</span>, other types of maps could also be included, such as Global Surface Water Mapping Layers and Water Soil Erosion from the Joint Research Centre (JRC). At national level there may be very significant covariates that could complement or replace the covariates of Table <span class="math inline">\(\ref{tab:covs}\)</span>.</p>
<p>Since environmental covariates are available at different resolutions and coordinate reference systems (CRS), they have to be harmonised at a common resolution and CRS. The target resolution in GSNmap is 250 m x 250 m, therefore, all covariates were aggregated (from higher to lower resolution) or disaggregated (from lower to higher resolution) to 250 m. This process involved a raster resampling method, which is usually implemented by a bilinear approach for continuous covariates, and by the nearest-neighbour approach for categorical covariates (not included in the current list).</p>
<p>Note that the target resolution of GSNmap has been set at 250 m, which can be considered a moderate resolution for a global layer. However, those countries that require a higher resolution are free to develop higher resolution maps and aggregate the resulting maps to the target resolution of GSNmap for submission.</p>
</div>
<div id="reducing-collinearity-in-environmental-covariates" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Reducing collinearity in environmental covariates<a href="step-2-download-environmental-covariates.html#reducing-collinearity-in-environmental-covariates" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Multicollinearity is usually present in remote sensing data and terrain attributes. While this was an issue for multiple linear regression models, current models such as random forest can deal with high dimensionality. However, the main reasons to reduce the number of environmental covariates are that a model with fewer predictors can be interpreted more easily, thus extracting new knowledge, redundant information increasing the computational demand, and improve prediction results <span class="citation">(<a href="#ref-Behrens2014" role="doc-biblioref">Behrens <em>et al.</em>, 2014</a>)</span>.</p>
<p>Covariate selection can be done by supervised or unsupervised methods <span class="citation">(<a href="#ref-Behrens2010" role="doc-biblioref">Behrens <em>et al.</em>, 2010</a>)</span>. Supervised methods work on the basis of prediction results, hence they are based on a given dataset. For instance, recursive feature elimination (RFE) in caret R package <span class="citation">(<a href="#ref-Kuhn2022" role="doc-biblioref">Kuhn, 2022</a>)</span> provides a tool for selecting covariates according to their predicting contribution. Instead, unsupervised methods are used to reduce the dimensionality of the dataset by removing redundant information without taking into account a particular target variable. Principal component analysis is one of the most widely used for this purpose, however, it does not ensure that specific discriminant features are kept within the main factors <span class="citation">(<a href="#ref-Behrens2014" role="doc-biblioref">Behrens <em>et al.</em>, 2014</a>)</span>. Another drawback of this technique is that model interpretation can be reduced when using factors instead of the original covariates.</p>
</div>
<div id="merging-soil-data-and-environmental-covariates" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Merging soil data and environmental covariates<a href="step-2-download-environmental-covariates.html#merging-soil-data-and-environmental-covariates" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A calibration dataset consists of soil observations and a matrix of predictors, where each row is a soil observation paired with the values of the corresponding covariates for the given spatial location. Some common issues and solution when merging soil observations and covariates are:</p>
<ul>
<li>Mismatch of coordinate reference system (CRS): it requires to convert the CRS of point data to the raster or polygon covariate CRS.</li>
<li>Categorical covariates: some covariates may be categorical, such as land use/cover, legacy soil maps or geological maps. A common problem in this case is that some classes may not be sampled with any soil observation, causing an error when using the layer for prediction, since the model cannot predict over a class that was not part of the model calibration step. Also, because of the cross-validation procedure, it is advised to have, at least, three soil samples per class for the same reason.</li>
</ul>

</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body">
<div id="ref-Behrens2014" class="csl-entry">
<strong>Behrens, T., Schmidt, K., Ramirez-Lopez, L., Gallant, J., Zhu, A.-X. &amp; Scholten, T.</strong> 2014. Hyper-scale digital soil mapping and soil formation analysis, 213: 578–588. <a href="https://doi.org/10.1016/j.geoderma.2013.07.031">https://doi.org/10.1016/j.geoderma.2013.07.031</a>
</div>
<div id="ref-Behrens2010" class="csl-entry">
<strong>Behrens, T., Zhu, A.-X., Schmidt, K. &amp; Scholten, T.</strong> 2010. Multi-scale digital terrain analysis and feature selection for digital soil mapping, 155: 175–185. <a href="https://doi.org/10.1016/j.geoderma.2009.07.010">https://doi.org/10.1016/j.geoderma.2009.07.010</a>
</div>
<div id="ref-Kuhn2022" class="csl-entry">
<strong>Kuhn, M.</strong> 2022. <em>Caret: Classification and regression training</em>. (also available at <a href="https://CRAN.R-project.org/package=caret">https://CRAN.R-project.org/package=caret</a>).
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="step-1-soil-data-preparation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="step-3-mapping-continuous-soil-properties.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
