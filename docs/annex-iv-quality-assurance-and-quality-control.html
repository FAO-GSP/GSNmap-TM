<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Annex IV: Quality assurance and quality control |  Global Soil Nutrient and Nutrient Budgets maps (GSNmap) Phase I</title>
  <meta name="description" content="GSNmap - Technical Manual" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Annex IV: Quality assurance and quality control |  Global Soil Nutrient and Nutrient Budgets maps (GSNmap) Phase I" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="GSNmap - Technical Manual" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Annex IV: Quality assurance and quality control |  Global Soil Nutrient and Nutrient Budgets maps (GSNmap) Phase I" />
  
  <meta name="twitter:description" content="GSNmap - Technical Manual" />
  

<meta name="author" content="Angelini, M.E, Luotto, I., Rodriguez Lado, L., Mainka, M., Yigini, Y., Tong, Y." />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="annex-iii-mapping-without-point-coordinates.html"/>
<link rel="next" href="references.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.2/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.2/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<script src="libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Licence</a></li>
<li class="chapter" data-level="" data-path="abbreviations-and-acronyms.html"><a href="abbreviations-and-acronyms.html"><i class="fa fa-check"></i>Abbreviations and acronyms</a></li>
<li class="chapter" data-level="" data-path="contributors-and-reviewers.html"><a href="contributors-and-reviewers.html"><i class="fa fa-check"></i>Contributors and reviewers</a></li>
<li class="chapter" data-level="1" data-path="presentation.html"><a href="presentation.html"><i class="fa fa-check"></i><b>1</b> Presentation</a>
<ul>
<li class="chapter" data-level="1.1" data-path="presentation.html"><a href="presentation.html#background-and-objectives"><i class="fa fa-check"></i><b>1.1</b> Background and Objectives</a></li>
<li class="chapter" data-level="1.2" data-path="presentation.html"><a href="presentation.html#global-soil-partnership"><i class="fa fa-check"></i><b>1.2</b> Global Soil Partnership</a></li>
<li class="chapter" data-level="1.3" data-path="presentation.html"><a href="presentation.html#country-driven-approach-and-tasks"><i class="fa fa-check"></i><b>1.3</b> Country-driven approach and tasks</a></li>
<li class="chapter" data-level="1.4" data-path="presentation.html"><a href="presentation.html#how-to-use-this-book"><i class="fa fa-check"></i><b>1.4</b> How to use this book</a></li>
<li class="chapter" data-level="1.5" data-path="presentation.html"><a href="presentation.html#training-material"><i class="fa fa-check"></i><b>1.5</b> Training material</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="soil-nutrients.html"><a href="soil-nutrients.html"><i class="fa fa-check"></i><b>2</b> Soil Nutrients</a>
<ul>
<li class="chapter" data-level="2.1" data-path="soil-nutrients.html"><a href="soil-nutrients.html#definition-of-soil-nutrients"><i class="fa fa-check"></i><b>2.1</b> Definition of soil nutrients</a></li>
<li class="chapter" data-level="2.2" data-path="soil-nutrients.html"><a href="soil-nutrients.html#soil-properties-governing-nutrient-availability"><i class="fa fa-check"></i><b>2.2</b> Soil properties governing nutrient availability</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html"><i class="fa fa-check"></i><b>3</b> Setting-up the software environment</a>
<ul>
<li class="chapter" data-level="3.1" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#use-of-r-rstudio-and-r-packages"><i class="fa fa-check"></i><b>3.1</b> Use of R, RStudio and R Packages</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#obtaining-and-installing-r"><i class="fa fa-check"></i><b>3.1.1</b> Obtaining and installing R</a></li>
<li class="chapter" data-level="3.1.2" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#obtaining-and-installing-rstudio"><i class="fa fa-check"></i><b>3.1.2</b> Obtaining and installing RStudio</a></li>
<li class="chapter" data-level="3.1.3" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#getting-started-with-r"><i class="fa fa-check"></i><b>3.1.3</b> Getting started with R</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#r-packages"><i class="fa fa-check"></i><b>3.2</b> R packages</a></li>
<li class="chapter" data-level="3.3" data-path="setting-up-the-software-environment.html"><a href="setting-up-the-software-environment.html#gee---google-earth-engine"><i class="fa fa-check"></i><b>3.3</b> GEE - google earth engine</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="digital-soil-mapping.html"><a href="digital-soil-mapping.html"><i class="fa fa-check"></i><b>4</b> Digital Soil Mapping</a>
<ul>
<li class="chapter" data-level="4.1" data-path="digital-soil-mapping.html"><a href="digital-soil-mapping.html#principles"><i class="fa fa-check"></i><b>4.1</b> Principles</a></li>
<li class="chapter" data-level="4.2" data-path="digital-soil-mapping.html"><a href="digital-soil-mapping.html#environmental-covariates"><i class="fa fa-check"></i><b>4.2</b> Environmental covariates</a></li>
<li class="chapter" data-level="4.3" data-path="digital-soil-mapping.html"><a href="digital-soil-mapping.html#machine-learning-techniques"><i class="fa fa-check"></i><b>4.3</b> Machine learning techniques</a></li>
<li class="chapter" data-level="4.4" data-path="digital-soil-mapping.html"><a href="digital-soil-mapping.html#mapping-of-soil-nutrients-and-associated-soil-attributes"><i class="fa fa-check"></i><b>4.4</b> Mapping of soil nutrients and associated soil attributes</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="arranging-soil-data-in-r.html"><a href="arranging-soil-data-in-r.html"><i class="fa fa-check"></i><b>5</b> Arranging soil data in <strong>R</strong></a>
<ul>
<li class="chapter" data-level="5.1" data-path="arranging-soil-data-in-r.html"><a href="arranging-soil-data-in-r.html#study-area-and-training-material"><i class="fa fa-check"></i><b>5.1</b> Study area and training material</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="arranging-soil-data-in-r.html"><a href="arranging-soil-data-in-r.html#georeferenced-topsoil-data"><i class="fa fa-check"></i><b>5.1.1</b> Georeferenced topsoil data</a></li>
<li class="chapter" data-level="5.1.2" data-path="arranging-soil-data-in-r.html"><a href="arranging-soil-data-in-r.html#soil-profile-data"><i class="fa fa-check"></i><b>5.1.2</b> Soil profile data</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="arranging-soil-data-in-r.html"><a href="arranging-soil-data-in-r.html#preproc"><i class="fa fa-check"></i><b>5.2</b> Format requirements of soil data</a></li>
<li class="chapter" data-level="5.3" data-path="arranging-soil-data-in-r.html"><a href="arranging-soil-data-in-r.html#pre-processing-steps"><i class="fa fa-check"></i><b>5.3</b> Pre-processing steps</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="arranging-soil-data-in-r.html"><a href="arranging-soil-data-in-r.html#set-the-scene-set-working-directory-packages-load-data"><i class="fa fa-check"></i><b>5.3.1</b> Set the scene (set working directory, packages, load data)</a></li>
<li class="chapter" data-level="5.3.2" data-path="arranging-soil-data-in-r.html"><a href="arranging-soil-data-in-r.html#basic-data-handling-operations"><i class="fa fa-check"></i><b>5.3.2</b> Basic data handling operations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html"><i class="fa fa-check"></i><b>6</b> Step 1: soil data preparation</a>
<ul>
<li class="chapter" data-level="6.1" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#load-national-data"><i class="fa fa-check"></i><b>6.1</b> Load national data</a></li>
<li class="chapter" data-level="6.2" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#data-quality-check"><i class="fa fa-check"></i><b>6.2</b> Data quality check</a></li>
<li class="chapter" data-level="6.3" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#calculation-of-pedo-transfer-functions"><i class="fa fa-check"></i><b>6.3</b> Calculation of pedo-transfer functions</a></li>
<li class="chapter" data-level="6.4" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#check-for-outliers"><i class="fa fa-check"></i><b>6.4</b> Check for outliers</a></li>
<li class="chapter" data-level="6.5" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#harmonise-soil-layer-depths"><i class="fa fa-check"></i><b>6.5</b> Harmonise soil layer depths</a></li>
<li class="chapter" data-level="6.6" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#harmonise-units"><i class="fa fa-check"></i><b>6.6</b> Harmonise units</a></li>
<li class="chapter" data-level="6.7" data-path="step-1-soil-data-preparation.html"><a href="step-1-soil-data-preparation.html#save-the-results"><i class="fa fa-check"></i><b>6.7</b> Save the results</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html"><i class="fa fa-check"></i><b>7</b> Step 2: download environmental covariates</a>
<ul>
<li class="chapter" data-level="7.1" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#environmental-covariates-1"><i class="fa fa-check"></i><b>7.1</b> Environmental covariates</a></li>
<li class="chapter" data-level="7.2" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#download-covariatesand-cropland-mask-with-google-earth-engine-gee"><i class="fa fa-check"></i><b>7.2</b> Download covariatesand cropland mask with Google Earth Engine (GEE)</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#assets"><i class="fa fa-check"></i><b>7.2.1</b> Assets</a></li>
<li class="chapter" data-level="7.2.2" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#define-the-region-of-interest-roi"><i class="fa fa-check"></i><b>7.2.2</b> Define the region of interest (ROI)</a></li>
<li class="chapter" data-level="7.2.3" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#load-and-clip-the-covariates"><i class="fa fa-check"></i><b>7.2.3</b> Load and clip the covariates</a></li>
<li class="chapter" data-level="7.2.4" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#clean-holes-in-fpar-layers"><i class="fa fa-check"></i><b>7.2.4</b> Clean holes in FPAR layers</a></li>
<li class="chapter" data-level="7.2.5" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#visualize-and-export-the-covariates"><i class="fa fa-check"></i><b>7.2.5</b> Visualize and export the covariates</a></li>
<li class="chapter" data-level="7.2.6" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#load-and-clip-the-copernicus-land-cover-map-and"><i class="fa fa-check"></i><b>7.2.6</b> Load and clip the Copernicus land cover map and</a></li>
<li class="chapter" data-level="7.2.7" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#reclassify-the-land-cover-map"><i class="fa fa-check"></i><b>7.2.7</b> Reclassify the land cover map</a></li>
<li class="chapter" data-level="7.2.8" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#visualization-and-exporting-mask"><i class="fa fa-check"></i><b>7.2.8</b> Visualization and exporting mask</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="step-2-download-environmental-covariates.html"><a href="step-2-download-environmental-covariates.html#run-and-export-in-gee"><i class="fa fa-check"></i><b>7.3</b> Run and export in GEE</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="step-3-mapping-continuous-soil-properties.html"><a href="step-3-mapping-continuous-soil-properties.html"><i class="fa fa-check"></i><b>8</b> Step 3: Mapping continuous soil properties</a>
<ul>
<li class="chapter" data-level="8.1" data-path="step-3-mapping-continuous-soil-properties.html"><a href="step-3-mapping-continuous-soil-properties.html#mapping-soil-properties-with-random-forest"><i class="fa fa-check"></i><b>8.1</b> Mapping Soil Properties with Random Forest</a></li>
<li class="chapter" data-level="8.2" data-path="step-3-mapping-continuous-soil-properties.html"><a href="step-3-mapping-continuous-soil-properties.html#getting-prepared-to-map"><i class="fa fa-check"></i><b>8.2</b> Getting prepared to map</a></li>
<li class="chapter" data-level="8.3" data-path="step-3-mapping-continuous-soil-properties.html"><a href="step-3-mapping-continuous-soil-properties.html#covariate-selection"><i class="fa fa-check"></i><b>8.3</b> Covariate selection</a></li>
<li class="chapter" data-level="8.4" data-path="step-3-mapping-continuous-soil-properties.html"><a href="step-3-mapping-continuous-soil-properties.html#model-calibration"><i class="fa fa-check"></i><b>8.4</b> Model calibration</a></li>
<li class="chapter" data-level="8.5" data-path="step-3-mapping-continuous-soil-properties.html"><a href="step-3-mapping-continuous-soil-properties.html#uncertainty-assessment"><i class="fa fa-check"></i><b>8.5</b> Uncertainty assessment</a></li>
<li class="chapter" data-level="8.6" data-path="step-3-mapping-continuous-soil-properties.html"><a href="step-3-mapping-continuous-soil-properties.html#predicting-soil-attributes"><i class="fa fa-check"></i><b>8.6</b> Predicting soil attributes</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="reporting-results.html"><a href="reporting-results.html"><i class="fa fa-check"></i><b>9</b> Reporting results</a></li>
<li class="chapter" data-level="10" data-path="way-forward.html"><a href="way-forward.html"><i class="fa fa-check"></i><b>10</b> Way forward</a>
<ul>
<li class="chapter" data-level="10.1" data-path="way-forward.html"><a href="way-forward.html#frequent-asked-questions-and-troubleshooting-answers"><i class="fa fa-check"></i><b>10.1</b> Frequent asked questions and Troubleshooting answers</a></li>
<li class="chapter" data-level="10.2" data-path="way-forward.html"><a href="way-forward.html#issues-in-the-gsnmap-technical-manual"><i class="fa fa-check"></i><b>10.2</b> Issues in the GSNmap Technical Manual</a></li>
<li class="chapter" data-level="10.3" data-path="way-forward.html"><a href="way-forward.html#get-help"><i class="fa fa-check"></i><b>10.3</b> Get help</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="annex-i-compendium-of-r-scripts.html"><a href="annex-i-compendium-of-r-scripts.html"><i class="fa fa-check"></i>Annex I: Compendium of R scripts</a>
<ul>
<li class="chapter" data-level="" data-path="annex-i-compendium-of-r-scripts.html"><a href="annex-i-compendium-of-r-scripts.html#script-0-introduction-to-r"><i class="fa fa-check"></i>Script 0: Introduction to R</a></li>
<li class="chapter" data-level="" data-path="annex-i-compendium-of-r-scripts.html"><a href="annex-i-compendium-of-r-scripts.html#script-2-data-preparation"><i class="fa fa-check"></i>Script 2: Data preparation</a></li>
<li class="chapter" data-level="" data-path="annex-i-compendium-of-r-scripts.html"><a href="annex-i-compendium-of-r-scripts.html#scripts-3-download-environmental-covariates"><i class="fa fa-check"></i>Scripts 3: Download environmental covariates</a></li>
<li class="chapter" data-level="" data-path="annex-i-compendium-of-r-scripts.html"><a href="annex-i-compendium-of-r-scripts.html#script-4-modelling-validation-and-prediction-using-soil-data-with-coordinates"><i class="fa fa-check"></i>Script 4: Modelling, validation and prediction using soil data with coordinates</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="annex-ii-r-scripts-for-extra-functions.html"><a href="annex-ii-r-scripts-for-extra-functions.html"><i class="fa fa-check"></i>Annex II: R scripts for extra functions</a></li>
<li class="chapter" data-level="" data-path="annex-iii-mapping-without-point-coordinates.html"><a href="annex-iii-mapping-without-point-coordinates.html"><i class="fa fa-check"></i>Annex III: Mapping without point coordinates</a></li>
<li class="chapter" data-level="" data-path="annex-iv-quality-assurance-and-quality-control.html"><a href="annex-iv-quality-assurance-and-quality-control.html"><i class="fa fa-check"></i>Annex IV: Quality assurance and quality control</a>
<ul>
<li class="chapter" data-level="" data-path="annex-iv-quality-assurance-and-quality-control.html"><a href="annex-iv-quality-assurance-and-quality-control.html#step-1-completeness-of-layers"><i class="fa fa-check"></i>Step 1: Completeness of layers</a></li>
<li class="chapter" data-level="" data-path="annex-iv-quality-assurance-and-quality-control.html"><a href="annex-iv-quality-assurance-and-quality-control.html#step-2-check-the-projection-and-resolution-of-all-data-products"><i class="fa fa-check"></i>Step 2: Check the projection and resolution of all data products</a></li>
<li class="chapter" data-level="" data-path="annex-iv-quality-assurance-and-quality-control.html"><a href="annex-iv-quality-assurance-and-quality-control.html#step-3-check-the-extent"><i class="fa fa-check"></i>Step 3: Check the extent</a></li>
<li class="chapter" data-level="" data-path="annex-iv-quality-assurance-and-quality-control.html"><a href="annex-iv-quality-assurance-and-quality-control.html#step-4-check-the-units-ranges-and-outliers"><i class="fa fa-check"></i>Step 4: Check the units, ranges, and outliers</a></li>
<li class="chapter" data-level="" data-path="annex-iv-quality-assurance-and-quality-control.html"><a href="annex-iv-quality-assurance-and-quality-control.html#qaqc-script"><i class="fa fa-check"></i>QA/QC Script</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><p><img src="images/frontcover.jpg" style="top:0px;height:100px;" align="right" />
Global Soil Nutrient and Nutrient Budgets maps (GSNmap) Phase I</p></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="annex-iv-quality-assurance-and-quality-control" class="section level1 unnumbered hasAnchor">
<h1>Annex IV: Quality assurance and quality control<a href="annex-iv-quality-assurance-and-quality-control.html#annex-iv-quality-assurance-and-quality-control" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The following protocol was devised to provide National Experts with a step-by-step guideline to perform a Quality Assurance (QA) and Quality Control (QC) of the 10 GSNmap first phase products.</p>
<p>The following protocol does not provide any guidance in terms of uncertainty estimation and validation. For more details and information on the estimation of uncertainties and potential map validation strategies please refer to Chapter 8.4.</p>
<p>Quality assurance and quality control consist of activities to ensure the quality of a particular result. Quality control is a reactive process that focuses on identifying defects and errors while quality assurance is a proactive approach aimed at preventing defects and errors. In the context of digital soil mapping, both processes are often interlinked. A QA is interlinked with a QC when it identifies defects and the QA remodels the process to eliminate the defects and prevent them from recurring (Chapman, 2005)(Figure<a href="annex-iv-quality-assurance-and-quality-control.html#fig:qaqc">10.2</a>).</p>
<div class="figure"><span style="display:block;" id="fig:qaqc"></span>
<img src="images/QA_QC.png" alt="Quality assurance and quality control." width="232" />
<p class="caption">
Figure 10.2: Quality assurance and quality control.
</p>
</div>
<p>Each step in the following protocol should be considered in order to detect and eliminate errors, address data inaccuracies and assess the output completeness.</p>
<div id="step-1-completeness-of-layers" class="section level2 unnumbered hasAnchor">
<h2>Step 1: Completeness of layers<a href="annex-iv-quality-assurance-and-quality-control.html#step-1-completeness-of-layers" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following Table (tab:products) gives an overview of all the GSNmap products in alphabetical order. Each product should include the ISO 3166-1 alpha-3 country code as uppercase letters in its name. For instance, in the case of Turkiye, ISO_GSNmap_Ntot_Map030 should be changed to TUR_GSNmap_Ntot_Map030.</p>
<p>All 10 soil property and soil nutrient maps with their corresponding 10 uncertainty layers must be georeferenced TIF (.tif) files.</p>
<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:products">Table 10.1: </span>Data product overview.
</caption>
<thead>
<tr>
<th style="text-align:left;">
Product
</th>
<th style="text-align:left;">
Filename
</th>
</tr>
</thead>
<tbody>
<tr grouplength="3">
<td colspan="2" style="border-bottom: 0;">
<strong>Major nutrients (3 files)</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Total Nitrogen map
</td>
<td style="text-align:left;">
ISO_GSNmap_Ntot_Map030.tiff
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Available Phosphorus map
</td>
<td style="text-align:left;">
ISO_GSNmap_Pav_Map030.tiff
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Total Potassium map
</td>
<td style="text-align:left;">
ISO_GSNmap_Ktot_Map030.tiff
</td>
</tr>
<tr grouplength="7">
<td colspan="2" style="border-bottom: 0;">
<strong>Associated soil properties (7 files)</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Cation exchange capacity map
</td>
<td style="text-align:left;">
ISO_GSNmap_CEC_Map030.tiff
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Soil pH map
</td>
<td style="text-align:left;">
ISO_GSNmap_pH_Map030.tiff
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Soil clay map
</td>
<td style="text-align:left;">
ISO_GSNmap_Clay_Map030.tiff
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Soil silt map
</td>
<td style="text-align:left;">
ISO_GSNmap_Silt_Map030.tiff
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Soil sand map
</td>
<td style="text-align:left;">
ISO_GSNmap_Sand_Map030.tiff
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Soil organic carbon map
</td>
<td style="text-align:left;">
ISO_GSNmap_SOC_Map030.tiff
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Soil bulk density map
</td>
<td style="text-align:left;">
ISO_GSNmap_BD_Map030.tiff
</td>
</tr>
<tr grouplength="10">
<td colspan="2" style="border-bottom: 0;">
<strong>Uncertainty maps (10 files)</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Total Nitrogen uncertainty map
</td>
<td style="text-align:left;">
ISO_GSNmap_Ntot_UncertaintyMap030.tiff
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Available Phosphorus uncertainty map
</td>
<td style="text-align:left;">
ISO_GSNmap_Pav_UncertaintyMap030.tiff
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Total Potassium uncertainty map
</td>
<td style="text-align:left;">
ISO_GSNmap_Ktot_UncertaintyMap030.tiff
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Cation exchange capacity uncertainty map
</td>
<td style="text-align:left;">
ISO_GSNmap_CEC_UncertaintyMap030.tiff
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Soil pH uncertainty map
</td>
<td style="text-align:left;">
ISO_GSNmap_pH_UncertaintyMap030.tiff
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Soil clay uncertainty map
</td>
<td style="text-align:left;">
ISO_GSNmap_Clay_UncertaintyMap030.tiff
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Soil silt uncertainty map
</td>
<td style="text-align:left;">
ISO_GSNmap_Silt_UncertaintyMap030.tiff
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Soil sand uncertainty map
</td>
<td style="text-align:left;">
ISO_GSNmap_Sand_UncertaintyMap030.tiff
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Soil organic carbon uncertainty map
</td>
<td style="text-align:left;">
ISO_GSNmap_SOC_UncertaintyMap030.tiff
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
Soil bulk density uncertainty map
</td>
<td style="text-align:left;">
ISO_GSNmap_BD_UncertaintyMap030.tiff
</td>
</tr>
</tbody>
</table>
</div>
<div id="step-2-check-the-projection-and-resolution-of-all-data-products" class="section level2 unnumbered hasAnchor">
<h2>Step 2: Check the projection and resolution of all data products<a href="annex-iv-quality-assurance-and-quality-control.html#step-2-check-the-projection-and-resolution-of-all-data-products" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Open the products in QGIS or any other preferred GIS platform. Check that the projection of all products is EPSG:4326 - WGS 84 (Layer properties). Check that the spatial resolution (pixel size) (Layer properties) is equal to ~0.002246 degrees ; 250 m x 250 m at the equator.</p>
</div>
<div id="step-3-check-the-extent" class="section level2 unnumbered hasAnchor">
<h2>Step 3: Check the extent<a href="annex-iv-quality-assurance-and-quality-control.html#step-3-check-the-extent" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Visualize the 20 products in QGIS or any preferred GIS platform. Load a land-use layer to visually assess that the simulations were done exclusively on croplands.</p>
</div>
<div id="step-4-check-the-units-ranges-and-outliers" class="section level2 unnumbered hasAnchor">
<h2>Step 4: Check the units, ranges, and outliers<a href="annex-iv-quality-assurance-and-quality-control.html#step-4-check-the-units-ranges-and-outliers" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the following section possible value ranges for each product category (except available potassium) are presented. It is important to note that the provided ranges represent a gross approximation of the extremes within which the values should fall in. Results that fall outside these ranges need to be carefully evaluated based on local expertise and available literature.</p>
<p>The provided ranges can be compared in QGIS, R, or any preferred platform. Descriptive layer statistics can be viewed in QGIS under Layer Properties.</p>
<p>The following table (Table 10.2) presents ranges of possible values for 9 of the 10 mandatory GSNmap products. The ranges were calculated based on the distribution of the soil profile data within the World Soil Information Service (WoSIS), specifically the WoSIS snapshot 2019 (Batjes, N. H. <em>et al.</em> 2020). It is important to note that the data was not filtered for croplands and that the ranges were extracted from soil profiles sampled globally from a wide array of land covers and land uses.</p>
<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:ranges">Table 10.2: </span>Possible soil property and soil nutrient values based on the distribution of the values within the World Soil Information Service (WoSIS), specifically the WoSIS snapshot 2019.
</caption>
<thead>
<tr>
<th style="text-align:left;">
Soil property
</th>
<th style="text-align:left;">
property_id
</th>
<th style="text-align:left;">
Unit
</th>
<th style="text-align:right;">
Min
</th>
<th style="text-align:right;">
1st Quartile
</th>
<th style="text-align:right;">
Median
</th>
<th style="text-align:right;">
3st Quartile
</th>
<th style="text-align:right;">
Max
</th>
<th style="text-align:right;">
n
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Total N
</td>
<td style="text-align:left;">
n_0_30
</td>
<td style="text-align:left;">
ppm
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
400.0
</td>
<td style="text-align:right;">
700.0
</td>
<td style="text-align:right;">
1500.0
</td>
<td style="text-align:right;">
84000.0
</td>
<td style="text-align:right;">
216362
</td>
</tr>
<tr>
<td style="text-align:left;">
P Bray I
</td>
<td style="text-align:left;">
p_0_30
</td>
<td style="text-align:left;">
ppm
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
16.0
</td>
<td style="text-align:right;">
150.0
</td>
<td style="text-align:right;">
40486
</td>
</tr>
<tr>
<td style="text-align:left;">
P Mehlich 3
</td>
<td style="text-align:left;">
p_0_30
</td>
<td style="text-align:left;">
ppm
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
6.1
</td>
<td style="text-align:right;">
22.0
</td>
<td style="text-align:right;">
149.4
</td>
<td style="text-align:right;">
7242
</td>
</tr>
<tr>
<td style="text-align:left;">
P Olsen
</td>
<td style="text-align:left;">
p_0_30
</td>
<td style="text-align:left;">
ppm
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0.7
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
141.0
</td>
<td style="text-align:right;">
8434
</td>
</tr>
<tr>
<td style="text-align:left;">
CEC
</td>
<td style="text-align:left;">
cec_0_30
</td>
<td style="text-align:left;">
cmol(c)/kg
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
7.5
</td>
<td style="text-align:right;">
14.0
</td>
<td style="text-align:right;">
23.0
</td>
<td style="text-align:right;">
140.0
</td>
<td style="text-align:right;">
295688
</td>
</tr>
<tr>
<td style="text-align:left;">
pH (water)
</td>
<td style="text-align:left;">
ph_0_30
</td>
<td style="text-align:left;">
/
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
5.2
</td>
<td style="text-align:right;">
6.2
</td>
<td style="text-align:right;">
7.5
</td>
<td style="text-align:right;">
12.3
</td>
<td style="text-align:right;">
613322
</td>
</tr>
<tr>
<td style="text-align:left;">
Clay
</td>
<td style="text-align:left;">
clay_0_30
</td>
<td style="text-align:left;">
%
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
11.1
</td>
<td style="text-align:right;">
21.9
</td>
<td style="text-align:right;">
35.3
</td>
<td style="text-align:right;">
100.0
</td>
<td style="text-align:right;">
590368
</td>
</tr>
<tr>
<td style="text-align:left;">
Silt
</td>
<td style="text-align:left;">
silt_0_30
</td>
<td style="text-align:left;">
%
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
15.0
</td>
<td style="text-align:right;">
30.0
</td>
<td style="text-align:right;">
47.6
</td>
<td style="text-align:right;">
100.0
</td>
<td style="text-align:right;">
558233
</td>
</tr>
<tr>
<td style="text-align:left;">
Sand
</td>
<td style="text-align:left;">
sand_0_30
</td>
<td style="text-align:left;">
%
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
15.0
</td>
<td style="text-align:right;">
36.0
</td>
<td style="text-align:right;">
60.2
</td>
<td style="text-align:right;">
100.0
</td>
<td style="text-align:right;">
482334
</td>
</tr>
<tr>
<td style="text-align:left;">
Soil Organic Carbon
</td>
<td style="text-align:left;">
soc_0_30
</td>
<td style="text-align:left;">
%
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
5.1
</td>
<td style="text-align:right;">
14.0
</td>
<td style="text-align:right;">
99.4
</td>
<td style="text-align:right;">
471301
</td>
</tr>
<tr>
<td style="text-align:left;">
Bulk density
</td>
<td style="text-align:left;">
bd_0_30
</td>
<td style="text-align:left;">
g/cm3
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
1.7
</td>
<td style="text-align:right;">
2.6
</td>
<td style="text-align:right;">
116756
</td>
</tr>
<tr>
<td style="text-align:left;">
Available K
</td>
<td style="text-align:left;">
k_0_30
</td>
<td style="text-align:left;">
ppm
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
</tbody>
</table>
</div>
<div id="qaqc-script" class="section level2 unnumbered hasAnchor">
<h2>QA/QC Script<a href="annex-iv-quality-assurance-and-quality-control.html#qaqc-script" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following script automates the for Steps described in the previous sections. It is important to note that the script’s main objective is to provide a fast alternative to check the output layers and that it does not replace the need to visually assess the final maps based on expert knowledge.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co">#_______________________________________________________________________________</span></span>
<span id="cb139-2"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb139-3"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-3" aria-hidden="true" tabindex="-1"></a><span class="co"># QA/QC</span></span>
<span id="cb139-4"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Soil Property Mapping</span></span>
<span id="cb139-5"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-5" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb139-6"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-6" aria-hidden="true" tabindex="-1"></a><span class="co"># GSP-Secretariat</span></span>
<span id="cb139-7"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Contact: Isabel.Luotto@fao.org</span></span>
<span id="cb139-8"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-8" aria-hidden="true" tabindex="-1"></a><span class="co">#          Marcos.Angelini@fao.org</span></span>
<span id="cb139-9"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-9" aria-hidden="true" tabindex="-1"></a><span class="co">#_______________________________________________________________________________</span></span>
<span id="cb139-10"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-11"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Empty environment and cache </span></span>
<span id="cb139-12"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-12" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb139-13"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-13" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>()</span>
<span id="cb139-14"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-15"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Content of this script =======================================================</span></span>
<span id="cb139-16"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 0 - Set working directory and packages</span></span>
<span id="cb139-17"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 1 - Step 1: Completeness of layers </span></span>
<span id="cb139-18"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 2 - Step 2: Check the projection and resolution of all data products</span></span>
<span id="cb139-19"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 3 - Step 3: Check the extent</span></span>
<span id="cb139-20"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 4 - Step 4: Check the units, ranges, and outliers</span></span>
<span id="cb139-21"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-21" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb139-22"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-22" aria-hidden="true" tabindex="-1"></a><span class="co"># 5 - Export QA/QC report</span></span>
<span id="cb139-23"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-23" aria-hidden="true" tabindex="-1"></a><span class="co">#_______________________________________________________________________________</span></span>
<span id="cb139-24"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-25"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-26"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 0 - Set working directory, soil attribute, and packages ======================</span></span>
<span id="cb139-27"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-28"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Working directory</span></span>
<span id="cb139-29"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-29" aria-hidden="true" tabindex="-1"></a>wd <span class="ot">&lt;-</span> <span class="st">&#39;C:/Users/hp/Documents/GitHub/GSNmap-TM/Digital-Soil-Mapping&#39;</span></span>
<span id="cb139-30"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-30" aria-hidden="true" tabindex="-1"></a><span class="co">#wd &lt;- &#39;C:/Users/luottoi/Documents/GitHub/GSNmap-TM/Digital-Soil-Mapping&#39;</span></span>
<span id="cb139-31"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-31" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(wd)</span>
<span id="cb139-32"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-33"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Define country of interes throuhg 3-digit ISO code</span></span>
<span id="cb139-34"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-34" aria-hidden="true" tabindex="-1"></a>ISO <span class="ot">=</span><span class="st">&#39;ISO&#39;</span></span>
<span id="cb139-35"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-36"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-36" aria-hidden="true" tabindex="-1"></a><span class="co">#load packages</span></span>
<span id="cb139-37"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb139-38"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-38" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb139-39"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-40"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Load reference values</span></span>
<span id="cb139-41"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-41" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">&quot;C:/Users/luottoi/Documents/GitHub/GSNmap-TM/tables/wosis_dist.xlsx&quot;</span>)</span>
<span id="cb139-42"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-42" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> dt[<span class="sc">!</span>(dt<span class="sc">$</span><span class="st">`</span><span class="at">Soil property</span><span class="st">`</span> <span class="sc">%in%</span><span class="fu">c</span>( <span class="st">&quot;P Bray I&quot;</span>,<span class="st">&quot;P Olsen&quot;</span> )),]</span>
<span id="cb139-43"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-44"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-44" aria-hidden="true" tabindex="-1"></a><span class="co"># In case old naming system was used</span></span>
<span id="cb139-45"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-45" aria-hidden="true" tabindex="-1"></a>dt<span class="sc">$</span>old_prop_ids <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;Ntot&#39;</span>, <span class="st">&#39;Pav&#39;</span>, <span class="st">&#39;CEC&#39;</span>,<span class="st">&#39;pH&#39;</span>, <span class="st">&#39;Clay&#39;</span>, <span class="st">&#39;Silt&#39;</span>, <span class="st">&#39;Sand&#39;</span>, <span class="st">&#39;SOC&#39;</span>, <span class="st">&#39;BD&#39;</span>, <span class="st">&#39;Kav&#39;</span>)</span>
<span id="cb139-46"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-47"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-48"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-48" aria-hidden="true" tabindex="-1"></a><span class="do">## Set potential ranges for Available K in ppm</span></span>
<span id="cb139-49"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-50"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-50" aria-hidden="true" tabindex="-1"></a>dt[dt<span class="sc">$</span>property_id<span class="sc">==</span><span class="st">&#39;k_0_30&#39;</span>,<span class="st">&#39;Min&#39;</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb139-51"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-51" aria-hidden="true" tabindex="-1"></a>dt[dt<span class="sc">$</span>property_id<span class="sc">==</span><span class="st">&#39;k_0_30&#39;</span>,<span class="st">&#39;Max&#39;</span>] <span class="ot">&lt;-</span> <span class="dv">150</span></span>
<span id="cb139-52"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-52" aria-hidden="true" tabindex="-1"></a><span class="co"># 1 - Step 1: Completeness of layers -------------------------------------------</span></span>
<span id="cb139-53"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-54"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-54" aria-hidden="true" tabindex="-1"></a><span class="co">#Check number of layers</span></span>
<span id="cb139-55"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-56"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-56" aria-hidden="true" tabindex="-1"></a><span class="do">## Specify number of soil property maps generated (not including the uncertainty layers)</span></span>
<span id="cb139-57"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-58"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-58" aria-hidden="true" tabindex="-1"></a><span class="do">## Check if all layers were correctly generated (including uncertainty layers)</span></span>
<span id="cb139-59"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-59" aria-hidden="true" tabindex="-1"></a><span class="co"># and if the correct ISO code and soil property ids were included in the files names</span></span>
<span id="cb139-60"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-60" aria-hidden="true" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">pattern=</span> <span class="st">&#39;.tif&#39;</span>, <span class="at">full.names =</span> T)</span>
<span id="cb139-61"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-61" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">list.files</span>( <span class="at">pattern=</span> <span class="st">&#39;.tif&#39;</span>, <span class="at">full.names =</span> F)</span>
<span id="cb139-62"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-62" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">&#39;.tif&#39;</span>, <span class="st">&#39;&#39;</span>, names)</span>
<span id="cb139-63"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-64"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-65"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Switch depending on the naming system (i.e. files have e.g. Pav instead of p_0_30)</span></span>
<span id="cb139-66"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-66" aria-hidden="true" tabindex="-1"></a><span class="co">#Step1 &lt;-data.frame(property_id =dt$property_id)</span></span>
<span id="cb139-67"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-67" aria-hidden="true" tabindex="-1"></a>Step1 <span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">property_id =</span>dt<span class="sc">$</span>old_prop_ids) <span class="co">#old naming system</span></span>
<span id="cb139-68"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-69"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-69" aria-hidden="true" tabindex="-1"></a>Step1<span class="sc">$</span>Names <span class="ot">&lt;-</span> <span class="st">&#39;Rename layer&#39;</span></span>
<span id="cb139-70"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-70" aria-hidden="true" tabindex="-1"></a>Step1<span class="sc">$</span>Uncertainty <span class="ot">&lt;-</span> <span class="st">&#39;Missing&#39;</span></span>
<span id="cb139-71"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-72"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-72" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">unique</span>(Step1<span class="sc">$</span>property_id)){</span>
<span id="cb139-73"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-73" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb139-74"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-74" aria-hidden="true" tabindex="-1"></a>  t11 <span class="ot">&lt;-</span> <span class="cn">TRUE</span> <span class="sc">%in%</span> <span class="fu">grepl</span>(<span class="fu">paste0</span>(<span class="st">&#39;SD_GSNmap_&#39;</span>,i), files)<span class="sc">|</span><span class="fu">grepl</span>(<span class="fu">paste0</span>(<span class="st">&#39;sd_&#39;</span>,i), files)</span>
<span id="cb139-75"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-75" aria-hidden="true" tabindex="-1"></a>  t12 <span class="ot">&lt;-</span> <span class="cn">TRUE</span> <span class="sc">%in%</span> <span class="fu">grepl</span>(<span class="fu">paste0</span>(ISO,<span class="st">&#39;_GSNmap_&#39;</span>,i), files)<span class="sc">|</span><span class="fu">grepl</span>(<span class="fu">paste0</span>(<span class="st">&#39;mean_&#39;</span>,i), files)</span>
<span id="cb139-76"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-76" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb139-77"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-77" aria-hidden="true" tabindex="-1"></a>  t13 <span class="ot">&lt;-</span> <span class="cn">TRUE</span> <span class="sc">%in%</span> <span class="fu">grepl</span>(ISO, files)</span>
<span id="cb139-78"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-78" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb139-79"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-79" aria-hidden="true" tabindex="-1"></a>  Step1[Step1<span class="sc">$</span>property_id <span class="sc">==</span>i, <span class="st">&#39;Names&#39;</span>] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(t12[[<span class="dv">1</span>]] <span class="sc">==</span>T <span class="sc">&amp;</span> t13[[<span class="dv">1</span>]] <span class="sc">==</span>T, <span class="st">&#39;Correctly named&#39;</span>, <span class="st">&#39;Rename layer&#39;</span>)</span>
<span id="cb139-80"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-80" aria-hidden="true" tabindex="-1"></a>  Step1[Step1<span class="sc">$</span>property_id <span class="sc">==</span>i, <span class="st">&#39;Uncertainty&#39;</span>] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(t11[[<span class="dv">1</span>]] <span class="sc">==</span>T , <span class="st">&#39;Generated&#39;</span>, <span class="st">&#39;Missing&#39;</span>)</span>
<span id="cb139-81"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-81" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb139-82"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-82" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb139-83"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-84"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-85"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-85" aria-hidden="true" tabindex="-1"></a><span class="co"># 2 - Step 2: Check the projection and resolution of all data products ---------</span></span>
<span id="cb139-86"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-86" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">rast</span>(files)</span>
<span id="cb139-87"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-87" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(r) <span class="ot">&lt;-</span> names</span>
<span id="cb139-88"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-88" aria-hidden="true" tabindex="-1"></a><span class="co"># Check projection (WGS 84)</span></span>
<span id="cb139-89"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-89" aria-hidden="true" tabindex="-1"></a>(<span class="at">Step21=</span><span class="fu">crs</span>(r, <span class="at">describe=</span><span class="cn">TRUE</span>)<span class="sc">$</span>name <span class="sc">==</span><span class="st">&#39;WGS 84&#39;</span>)</span>
<span id="cb139-90"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-91"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-91" aria-hidden="true" tabindex="-1"></a><span class="co"># Check resolution (250 m)</span></span>
<span id="cb139-92"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-92" aria-hidden="true" tabindex="-1"></a>(<span class="at">Step22=</span><span class="fu">round</span>(<span class="fu">res</span>(r)[[<span class="dv">1</span>]], <span class="dv">5</span>) <span class="sc">==</span> <span class="fl">0.00225</span>)</span>
<span id="cb139-93"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-94"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-94" aria-hidden="true" tabindex="-1"></a><span class="co"># 3 - Step 3: Check the extent -------------------------------------------------</span></span>
<span id="cb139-95"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-95" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if the layers were masked with a cropland mask</span></span>
<span id="cb139-96"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-97"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-97" aria-hidden="true" tabindex="-1"></a>mask <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&#39;mask/mask.tif&#39;</span>)</span>
<span id="cb139-98"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-98" aria-hidden="true" tabindex="-1"></a>mask <span class="ot">&lt;-</span> <span class="fu">project</span>(mask, r[[<span class="dv">1</span>]])</span>
<span id="cb139-99"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-100"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-100" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> r[[<span class="dv">1</span>]]</span>
<span id="cb139-101"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-101" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">ifel</span>(<span class="sc">!</span><span class="fu">is.na</span>(t),<span class="dv">1</span>, <span class="cn">NA</span>)</span>
<span id="cb139-102"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-103"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-103" aria-hidden="true" tabindex="-1"></a>t3 <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">values</span>(t, <span class="at">na.rm=</span>T))<span class="sc">-</span><span class="fu">sum</span>(<span class="fu">values</span>(mask, <span class="at">na.rm=</span>T))</span>
<span id="cb139-104"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-105"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-105" aria-hidden="true" tabindex="-1"></a>(<span class="at">Step3=</span> t3 <span class="sc">&lt;=</span><span class="dv">10</span>)</span>
<span id="cb139-106"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-107"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-108"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-109"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-109" aria-hidden="true" tabindex="-1"></a><span class="co"># 4 - Step 4: Check the units, ranges, and outliers ----------------------------</span></span>
<span id="cb139-110"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-110" aria-hidden="true" tabindex="-1"></a>Step4 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">property_id=</span>Step1<span class="sc">$</span>property_id)</span>
<span id="cb139-111"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-111" aria-hidden="true" tabindex="-1"></a><span class="co">#Step4 &lt;- data.frame(property_id =dt$property_id)</span></span>
<span id="cb139-112"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-112" aria-hidden="true" tabindex="-1"></a>Step4<span class="sc">$</span>in_range <span class="ot">&lt;-</span> <span class="st">&#39;Values not in range&#39;</span></span>
<span id="cb139-113"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-114"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-114" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">unique</span>(Step4<span class="sc">$</span>property_id)){</span>
<span id="cb139-115"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-115" aria-hidden="true" tabindex="-1"></a>  t41 <span class="ot">&lt;-</span><span class="fu">min</span>(<span class="fu">values</span>(r[[<span class="fu">grepl</span>(<span class="fu">paste0</span>(<span class="st">&#39;mean_&#39;</span>,i), <span class="fu">names</span>(r))<span class="sc">|</span><span class="fu">grepl</span>(<span class="fu">paste0</span>(ISO,<span class="st">&#39;_GSNmap_&#39;</span>,i), <span class="fu">names</span>(r))]],<span class="at">na.rm=</span>T)) <span class="sc">&gt;=</span>dt[Step4<span class="sc">$</span>property_id <span class="sc">==</span> i, <span class="st">&#39;Min&#39;</span>]</span>
<span id="cb139-116"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-116" aria-hidden="true" tabindex="-1"></a>  t42 <span class="ot">&lt;-</span><span class="fu">max</span>(<span class="fu">values</span>(r[[<span class="fu">grepl</span>(<span class="fu">paste0</span>(<span class="st">&#39;mean_&#39;</span>,i), <span class="fu">names</span>(r))<span class="sc">|</span><span class="fu">grepl</span>(<span class="fu">paste0</span>(ISO,<span class="st">&#39;_GSNmap_&#39;</span>,i), <span class="fu">names</span>(r))]],<span class="at">na.rm=</span>T)) <span class="sc">&lt;=</span>dt[Step4<span class="sc">$</span>property_id <span class="sc">==</span> i, <span class="st">&#39;Max&#39;</span>]</span>
<span id="cb139-117"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-117" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb139-118"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-118" aria-hidden="true" tabindex="-1"></a>  Step4[Step4<span class="sc">$</span>property_id <span class="sc">==</span>i, <span class="st">&#39;in_range&#39;</span>] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(t41[[<span class="dv">1</span>]] <span class="sc">==</span>T <span class="sc">&amp;</span> t42[[<span class="dv">1</span>]] <span class="sc">==</span>T, <span class="st">&#39;Values in range&#39;</span>, <span class="st">&#39;Values not in range&#39;</span>)</span>
<span id="cb139-119"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-119" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb139-120"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-120" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb139-121"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-122"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-123"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-124"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-124" aria-hidden="true" tabindex="-1"></a><span class="co"># 5 - Export QA/QC report ------------------------------------------------------</span></span>
<span id="cb139-125"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-125" aria-hidden="true" tabindex="-1"></a>report <span class="ot">&lt;-</span> <span class="fu">merge</span>(Step4, Step1, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&#39;property_id&#39;</span>))</span>
<span id="cb139-126"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-127"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-127" aria-hidden="true" tabindex="-1"></a>report<span class="sc">$</span>projection <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(Step21, <span class="st">&#39;WGS 84&#39;</span>, <span class="st">&#39;Reproject layer&#39;</span>)</span>
<span id="cb139-128"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-128" aria-hidden="true" tabindex="-1"></a>report<span class="sc">$</span>resolution <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(Step21, <span class="st">&#39;250 m&#39;</span>, <span class="st">&#39;Resample layer&#39;</span>)</span>
<span id="cb139-129"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-129" aria-hidden="true" tabindex="-1"></a>report<span class="sc">$</span>extent <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(Step3, <span class="st">&#39;Croplands&#39;</span>, <span class="st">&#39;Mask out layer&#39;</span>)</span>
<span id="cb139-130"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-131"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-131" aria-hidden="true" tabindex="-1"></a>report</span>
<span id="cb139-132"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-133"><a href="annex-iv-quality-assurance-and-quality-control.html#cb139-133" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(report, <span class="fu">paste0</span>(<span class="st">&#39;QA_QC_&#39;</span>, ISO, <span class="st">&#39;.csv&#39;</span>))</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="annex-iii-mapping-without-point-coordinates.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["GSNmap_Technical_Manual.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
},
"fig_caption": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
